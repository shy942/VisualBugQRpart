synergy client implementation embedded synergy client library version july copyright alex evans software express implied warranty event authors held liable damages arising software permission granted software purpose including commercial applications alter redistribute freely subject restrictions origin software misrepresented claim wrote original software software product acknowledgment product documentation appreciated required altered source versions plainly marked misrepresented original software notice removed altered source distribution include synergy include stdio include string internal helpers read bit integer network byte order convert native byte order static int net native const unsigned char ifdef usynergy endian return return endif read bit integer network byte order convert native byte order static int net native const unsigned char ifdef usynergy endian return return endif trace text client static void trace synergy context context const char text trace trace function context trace func context trace func context cookie text add string reply packet static void add string synergy context context const char string size len strlen string memcpy context reply cur string len context reply cur len add uint reply packet static void add int synergy context context uint context reply cur add uint reply packet static void add int synergy context context uint uint reply context reply cur reply uint reply uint context reply cur reply add uint reply packet static void add int synergy context context uint uint reply context reply cur reply uint reply uint reply uint reply uint context reply cur reply send reply packet static synergy bool send reply synergy context context set header size uint reply buf context reply buffer uint reply len uint context reply cur reply buf total size reply uint body len reply len size body synergy bool ret reply buf uint body len reply buf uint body len reply buf uint body len reply buf uint body len send reply ret context send func context cookie context reply buffer reply len reset reply buffer write pointer context reply cur context reply buffer return ret mouse callback mouse event static void send mouse callback synergy context context skip callback installed context mouse callback return send callback context mouse callback context cookie context mouse context mouse context mouse wheel context mouse wheel context mouse button left context mouse button context mouse button middle send keyboard callback key pressed released static void send keyboard callback synergy context context uint key uint modifiers synergy bool synergy bool repeat skip callback installed context keyboard callback return send callback context keyboard callback context cookie key modifiers repeat send joystick callback static void send joystick callback synergy context context uint joy num int sticks skip callback installed context joystick callback return send callback sticks context joystick sticks joy num context joystick callback context cookie joy num context joystick buttons joy num sticks sticks sticks sticks parse single client message update send callbacks send replies define usynergy packet pkt memcmp message pkt static void process message synergy context context const uint message packet memcmp message synergy message msg synergy msg synergy add string context synergy add int context usynergy protocol major add int context usynergy protocol minor add int context uint strlen context client add string context context client send reply context send reply failed reconnect trace context send reply failed reconnect context connected usynergy false context sleep func context cookie assume connected char buffer sprintf buffer connected client context client trace context buffer context received usynergy true return usynergy packet qinf screen info reply dinf msg info qinf msg info dinf uint warp add string context dinf add int context add int context add int context context client width add int context context client height add int context warp add int context add int context send reply context return usynergy packet ciak msg info ack ciak return usynergy packet crop msg reset options crop return usynergy packet cinn screen enter reply cnop msg enter cinn synergy sequence number context sequence number net native message context captured usynergy true callback context screen active callback context screen active callback context cookie usynergy true usynergy packet cout screen leave msg leave cout context captured usynergy false callback context screen active callback context screen active callback context cookie usynergy false usynergy packet dmdn mouse msg mouse dmdn char btn message btn context mouse button usynergy true btn context mouse button middle usynergy true context mouse button left usynergy true send mouse callback context usynergy packet dmup mouse msg mouse dmup char btn message btn context mouse button usynergy false btn context mouse button middle usynergy false context mouse button left usynergy false send mouse callback context usynergy packet dmmv mouse reply cnop msg mouse dmmv context mouse net native message context mouse net native message send mouse callback context usynergy packet dmwm mouse wheel msg mouse wheel dmwm msg mouse wheel dmwm context mouse wheel net native message context mouse wheel net native message send mouse callback context usynergy packet dkdn key msg key dkdn msg key dkdn uint net native message uint mod net native message uint key net native message send keyboard callback context key mod usynergy true usynergy false usynergy packet dkrp key repeat msg key repeat dkrp msg key repeat dkrp uint mod net native message uint count net native message uint key net native message send keyboard callback context key mod usynergy true usynergy true usynergy packet dkup key msg key dkup msg key dkup uint endian net native sbuf uint mod net native message uint key net native message send keyboard callback context key mod usynergy false usynergy false usynergy packet dgbt joystick buttons msg game buttons dgbt uint joy num message joy num usynergy num joysticks copy button send callback context joystick buttons joy num message message send joystick callback context joy num usynergy packet dgst joystick sticks msg game sticks dgst uint joy num message joy num usynergy num joysticks copy stick send callback memcpy context joystick sticks joy num message send joystick callback context joy num usynergy packet dsop set options msg set options dsop usynergy packet calv keepalive reply calv cnop msg alive calv add string context calv send reply context reply cnop usynergy packet dclp clipboard message msg clipboard dclp clipboard message uint size message chars identifier dclp uint clipboard uint sequence number message coming server uint total size remaining string synergy string format uint size char buffer null terminated uint number formats message number formats times uint format clipboard data uint size clipboard data uint clipboard data const uint parse msg message uint num formats net native parse msg parse msg num formats num formats parse clipboard format header uint format net native parse msg uint size net native parse msg parse msg callback context clipboard callback context clipboard callback context cookie format parse msg size parse msg size unknown packet msg noop cnop msg close cbye msg clipboard cclp msg screen saver csec msg key repeat dkrp msg key repeat dkrp msg mouse rel dmrm msg incompatible eicv msg busy ebsy msg unknown eunk msg bad ebad char buffer sprintf buffer unknown packet message message message message trace context buffer return reply cnop add string context cnop send reply context undef usynergy packet mark context disconnected static void set disconnected synergy context context context connected usynergy false context received usynergy false context captured usynergy false context reply cur context reply buffer context sequence number update connected context static void update context synergy context context receive data blocking int receive size usynergy receive buffer size context receive ofs int num received int packlen context receive func context cookie context receive buffer context receive ofs receive size num received usynergy false receive failed reconnect char buffer sprintf buffer receive failed bytes asked bytes received reconnect receive size num received trace context buffer set disconnected context context sleep func context cookie return context receive ofs num received receive data polling connected data avoid overloading synergy thread hammer polling rest bit data num received context sleep func context cookie check timeouts context received uint cur time context time func num received timeout secs inactivity received calv cur time context message time usynergy idle timeout set disconnected context context message time cur time eat packets grab packet length bail packet buffer packlen net native context receive buffer packlen context receive ofs break process message process message context context receive buffer packet buffer memmove context receive buffer context receive buffer packlen context receive ofs packlen context receive ofs packlen throw sized packets packlen usynergy receive buffer size oversized packet ditch tail char buffer sprintf buffer oversized packet length context receive buffer context receive buffer context receive buffer context receive buffer packlen trace context buffer num received context receive ofs bytes size field num received packlen int buffer left packlen num received int receive buffer left usynergy receive buffer size buffer left usynergy receive buffer size int ditch received context receive func context cookie context receive buffer receive ditch received usynergy false receive failed reconnect trace context receive failed reconnect set disconnected context context sleep func context cookie break num received ditch received context receive ofs public interface initialize synergy context void synergy init synergy context context memory memset context sizeof synergy context initialize default set disconnected context update synergy void synergy update synergy context context context connected update context receive data callbacks update context context connect context connect func context cookie context connected usynergy true send clipboard data void synergy send clipboard synergy context context const char text calculate maximum size fit reply packet uint overhead size message size message clipboard sequence number rest message size synergy string number clipboard formats clipboard format clipboard data length uint max length usynergy reply buffer size overhead size clip text max length uint text length uint strlen text text length max length char buffer sprintf buffer clipboard buffer small clipboard truncated characters max length trace context buffer text length max length assemble packet add string context dclp add int context clipboard add int context context sequence number add int context text length rest message size num formats format length data add int context number formats text add int context usynergy clipboard format text add int context text length add string context text send reply context