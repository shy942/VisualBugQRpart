dear imgui modified version stb textedit pushed nothings stb stb textedit discard redo stb textedit charpos handle grep dear imgui renamed macros defined imstb textedit implementation block stb textedit imstb textedit stb textedit public domain sean barrett development library sponsored rad game tools header file implements guts multi text editing widget implement display word wrapping level string insertion deletion stb textedit map user inputs insertions deletions updates cursor position selection undo intended games systems build custom widgets heavy text editing requirements library recommended editing large texts performance scale limited undo trivial behaviors modelled windows text controls license file license dependencies runtime function memmove override defining imstb textedit memmove implementation functions performs runtime allocations version history fixes bug undo size management user change stb textedit keytype redo avoid crash dragging single textfield supress warnings casting const wcast qual customizable word keyboard handling mouse button change range handling case baseline stb textedit memmove add support secondary signed unsigned warnings mouse clicking nearest char boundary rad types crept code word requires stb textedit space improve documentation initial public release bugfixes single mode insert mode fixes undo redo initial version additional contributors ulf winklemann word fabian giesen secondary key inputs martins mozeiko stb textedit memmove louis schnellbach bugfixes scott graham daniel keller omar cornut dan thompson usage file behaves differently depending symbols define including header file mode define stb textedit implementation including operate header file mode mode declares single public symbol stb textedit encapsulates current text widget string store separately compile mode define stb textedit chartype primitive type defines single character char wchar save space increase undo ability optionally define undo stb textedit positiontype small int type encoding valid cursor position stb textedit undostatecount number undo stb textedit undocharcount number characters store undo buffer define set permissive types moderate sizes undo memory allocations grows stb textedit worst case storage bytes sizeof stb textedit positiontype stb textedit undostatecount sizeof stb textedit chartype stb textedit undocharcount implementation mode define stb textedit implementation including compile implementation text edit widget depending large number symbols defined include implementation defined static functions provide file access static functions basic concept provide string object behaves array characters stb textedit indices refer positions string implicitly representing positions displayed textedit true plain text rich text rich text stb truetype interacts code array displayed characters symbols header file implementation mode stb textedit chartype character type stb textedit positiontype small type valid cursor position stb textedit undostatecount number undo stb textedit undocharcount number characters store undo buffer symbols define implementation mode stb textedit string type object representing string edited typically wrapper object data stb textedit stringlen obj length string ideally stb textedit layoutrow obj returns laying characters starting character discussion stb textedit getwidth obj returns pixel delta xpos character xpos char characters starting character accounts kerning previous char stb textedit keytotext maps keyboard input insertable character return type int valid insert stb textedit getchar obj returns character obj based stb textedit newline character returned getchar recognize manually wordwrapping positioning stb textedit deletechars obj delete characters starting stb textedit insertchars obj insert characters pointed stb textedit chartype stb textedit shift power keyboard input represent shift key stb textedit left keyboard input cursor left stb textedit keyboard input cursor stb textedit keyboard input cursor stb textedit keyboard input cursor stb textedit pgup keyboard input cursor stb textedit pgdown keyboard input cursor stb textedit linestart keyboard input cursor start stb textedit lineend keyboard input cursor stb textedit textstart keyboard input cursor start text ctrl stb textedit textend keyboard input cursor text ctrl stb textedit delete keyboard input delete selection character cursor stb textedit backspace keyboard input delete selection character left cursor stb textedit undo keyboard input perform undo stb textedit redo keyboard input perform redo optional stb textedit insert keyboard input toggle insert mode stb textedit space true character whitespace isspace required default wordleft wordright handlers stb textedit movewordleft obj custom handler wordleft returns cursor stb textedit movewordright obj custom handler wordright returns cursor stb textedit wordleft keyboard input cursor left word ctrl left stb textedit wordright keyboard input cursor word ctrl stb textedit linestart secondary keyboard input cursor start stb textedit lineend secondary keyboard input cursor stb textedit textstart secondary keyboard input cursor start text stb textedit textend secondary keyboard input cursor text keyboard input encoded single integer character code bitflags represent shift simplify interface shift bitflag test shifted cursor movements selection stb textedit stb textedit shift shifted arrow encode control alt additional bits test presence stb textedit wordleft windows implementations add additional control bit additional keydown bit stb textedit values bitwise keydown bit pass keydown char events key function api control match keydown events keydown bit add stb textedit keytotext tests keydown bit decodes char events stb textedit layoutrow returns shape displayed row characters assuming start character width height number characters consumed library traverse entire layout incrementally compute word wrapping textfield insert mode normal applications work app wide insert mode update copy insert mode field stb textedit calling api functions api void stb textedit initialize stb textedit int single void stb textedit click stb textedit string str stb textedit float float void stb textedit drag stb textedit string str stb textedit float float int stb textedit cut stb textedit string str stb textedit int stb textedit paste stb textedit string str stb textedit stb textedit chartype text int len void stb textedit key stb textedit string str stb textedit stb texedit keytype key functions updates string updates initialize set textedit good default initially constructing textedit click mouse mouse update cursor reset selection start cursor point relative text widget left drag mouse mouse drag update cursor selection point cut delete current selection returns true copy current selection paste buffer copy copy current selection string paste paste text current cursor point current selection key keyboard inputs textfield key events translated key events win distinguish unicode characters control inputs set high bit distinguish define definitions stb textedit left key event bit set stb textedit keytochar check key event bit clear stb textedit keytype defaults int define type wante including rendering read cursor position selection stb textedit notes designed usable imgui possibility running imgui cached multi layout reason interface compatible computing layout incrementally passes locate mouse pointer text define functions return positions characters binary search dynamic layout layout algorithm times manually search pass logic applies arrow arrow movement widget cached layout efficient horrible modern computers edit files header file mode ifndef include imstb textedit define include imstb textedit stb textedit definition stb textedit store textfield includes cursor position selection undo ifndef imstb textedit undostatecount define imstb textedit undostatecount endif ifndef imstb textedit undocharcount define imstb textedit undocharcount endif ifndef imstb textedit chartype define imstb textedit chartype int endif ifndef imstb textedit positiontype define imstb textedit positiontype int endif typedef struct private data imstb textedit positiontype imstb textedit positiontype insert length imstb textedit positiontype delete length int char storage stb undo record typedef struct private data stb undo record undo rec imstb textedit undostatecount imstb textedit chartype undo char imstb textedit undocharcount short undo point redo point int undo char point redo char point stb undo typedef struct public data int cursor position text cursor string int select start selection start point int select selection start point characters equal selection note start greater dragging mouse start initial click drag direction unsigned char insert mode textfield insert mode app wide insert mode copy app int row count size number row set pageup pagedown multilines documents private data unsigned char cursor implemented unsigned char initialized unsigned char preferred unsigned char single unsigned char padding padding padding float preferred determines cursor seek stb undo undostate stb textedit stb textedit row result layout query stb textedit determine text row result layout query typedef struct float starting location location align float baseline delta position baseline relative previous row baseline float ymin ymax height row baseline int num chars stb textedit row endif include imstb textedit implementation mode implementation include guarded indirectly included header portion ifdef imstb textedit implementation ifndef imstb textedit memmove include string define imstb textedit memmove memmove endif mouse input handling traverse layout locate nearest character display position static int stb text locate coord imstb textedit string str float float stb textedit row int stb textedit stringlen str float base prev int ymin ymax num chars search rows straddles stb textedit layoutrow str num chars return base ymin return base ymax break num chars base baseline delta text return character return check return check search characters row straddles prev num chars float stb textedit getwidth str prev prev return return prev happen fall case character newline return return character stb textedit getchar str num chars stb textedit newline return num chars return num chars api click mouse cursor clicked location reset selection static void stb textedit click imstb textedit string str stb textedit float float single mode drag working mouse text single stb textedit row stb textedit layoutrow str ymin cursor stb text locate coord str select start cursor select cursor preferred api drag mouse drag cursor selection endpoint clicked location static void stb textedit drag imstb textedit string str stb textedit float float int single mode drag working mouse text single stb textedit row stb textedit layoutrow str ymin select start select select start cursor stb text locate coord str cursor select keyboard input handling declarations static void stb text undo imstb textedit string str stb textedit static void stb text redo imstb textedit string str stb textedit static void stb text makeundo delete imstb textedit string str stb textedit int int length static void stb text makeundo insert stb textedit int int length static void stb text makeundo replace imstb textedit string str stb textedit int int length int length typedef struct float position character float height height int char length char row length int prev char previous row stb location character remember info previous row case event rescan static void stb textedit charpos stb imstb textedit string str int int single stb textedit row int prev start int stb textedit stringlen str int single special case needed stb textedit layoutrow str char length height ymax ymin return search rows straddles character stb textedit layoutrow str num chars break num chars stb textedit getchar str stb textedit newline dear imgui special handling break dear imgui prev start num chars baseline delta dear imgui num chars dear imgui break dear imgui char length num chars height ymax ymin prev prev start scan xpos stb textedit getwidth str define stb text selection select start select selection cursor valid client altered string static void stb textedit clamp imstb textedit string str stb textedit int stb textedit stringlen str stb text selection select start select start select select clamping forced equal cursor match select start select cursor select start cursor cursor delete characters updating undo static void stb textedit delete imstb textedit string str stb textedit int int len stb text makeundo delete str len stb textedit deletechars str len preferred delete static void stb textedit delete selection imstb textedit string str stb textedit stb textedit clamp str stb text selection select start select stb textedit delete str select start select select start select cursor select start stb textedit delete str select select start select select start cursor select preferred canoncialize selection start static void stb textedit sortselection stb textedit select select start int temp select select select start select start temp cursor character selection static void stb textedit stb textedit stb text selection stb textedit sortselection cursor select start select select start preferred cursor character selection static void stb textedit imstb textedit string str stb textedit stb text selection stb textedit sortselection stb textedit clamp str cursor select select start select preferred ifdef stb textedit space static int word boundary imstb textedit string str int idx return idx stb textedit space stb textedit getchar str idx stb textedit space stb textedit getchar str idx ifndef stb textedit movewordleft static int stb textedit word previous imstb textedit string str int character word boundary str return define stb textedit movewordleft stb textedit word previous endif ifndef stb textedit movewordright static int stb textedit word imstb textedit string str int const int len stb textedit stringlen str character len word boundary str len len return define stb textedit movewordright stb textedit word endif endif update selection cursor match static void stb textedit prep selection cursor stb textedit stb text selection select start select cursor cursor select api cut delete selection static int stb textedit cut imstb textedit string str stb textedit stb text selection stb textedit delete selection str implicitly clamps preferred return return api paste replace existing selection passed text static int stb textedit paste internal imstb textedit string str stb textedit imstb textedit chartype text int len selection paste delete stb textedit clamp str stb textedit delete selection str insert characters stb textedit insertchars str cursor text len stb text makeundo insert cursor len cursor len preferred return note paste failure leave deleted selection restored undo details return ifndef stb textedit keytype define stb textedit keytype int endif api key process keyboard input static void stb textedit key imstb textedit string str stb textedit stb textedit keytype key retry switch key default int stb textedit keytotext key imstb textedit chartype imstb textedit chartype add newline single mode single break insert mode stb text selection cursor stb textedit stringlen str stb text makeundo replace str cursor stb textedit deletechars str cursor stb textedit insertchars str cursor cursor preferred stb textedit delete selection str implicitly clamps stb textedit insertchars str cursor stb text makeundo insert cursor cursor preferred break ifdef stb textedit insert case stb textedit insert insert mode insert mode break endif case stb textedit undo stb text undo str preferred break case stb textedit redo stb text redo str preferred break case stb textedit left selection cursor start selection stb text selection stb textedit cursor cursor preferred break case stb textedit selection cursor selection stb text selection stb textedit str cursor stb textedit clamp str preferred break case stb textedit left stb textedit shift stb textedit clamp str stb textedit prep selection cursor selection left select select cursor select preferred break ifdef stb textedit movewordleft case stb textedit wordleft stb text selection stb textedit cursor stb textedit movewordleft str cursor stb textedit clamp str break case stb textedit wordleft stb textedit shift stb text selection stb textedit prep selection cursor cursor stb textedit movewordleft str cursor select cursor stb textedit clamp str break endif ifdef stb textedit movewordright case stb textedit wordright stb text selection stb textedit str cursor stb textedit movewordright str cursor stb textedit clamp str break case stb textedit wordright stb textedit shift stb text selection stb textedit prep selection cursor cursor stb textedit movewordright str cursor select cursor stb textedit clamp str break endif case stb textedit stb textedit shift stb textedit prep selection cursor selection select stb textedit clamp str cursor select preferred break case stb textedit case stb textedit stb textedit shift case stb textedit pgdown case stb textedit pgdown stb textedit shift stb stb textedit row row int sel key stb textedit shift int key stb textedit shift stb textedit pgdown int row count row count single windows single behave left key stb textedit key stb textedit shift goto retry sel stb textedit prep selection cursor stb text selection stb textedit str compute current position cursor point stb textedit clamp str stb textedit charpos str cursor single row count float goal preferred preferred int start char length length break dear imgui bring stb textedit getchar str char length stb textedit newline break character position row cursor start stb textedit layoutrow row str cursor row row num chars float stb textedit getwidth str start ifdef imstb textedit getwidth newline imstb textedit getwidth newline break endif goal break cursor stb textedit clamp str preferred preferred goal sel select cursor char char length length row num chars break case stb textedit case stb textedit stb textedit shift case stb textedit pgup case stb textedit pgup stb textedit shift stb stb textedit row row int prev scan sel key stb textedit shift int key stb textedit shift stb textedit pgup int row count row count single windows left key stb textedit left key stb textedit shift goto retry sel stb textedit prep selection cursor stb text selection stb textedit compute current position cursor point stb textedit clamp str stb textedit charpos str cursor single row count float goal preferred preferred previous row prev char break character position row cursor prev stb textedit layoutrow row str cursor row row num chars float stb textedit getwidth str prev ifdef imstb textedit getwidth newline imstb textedit getwidth newline break endif goal break cursor stb textedit clamp str preferred preferred goal sel select cursor previous scan previous hard expose api function prev scan prev prev prev scan stb textedit getchar str prev scan stb textedit newline prev scan char prev prev prev scan break case stb textedit delete case stb textedit delete stb textedit shift stb text selection stb textedit delete selection str int stb textedit stringlen str cursor stb textedit delete str cursor preferred break case stb textedit backspace case stb textedit backspace stb textedit shift stb text selection stb textedit delete selection str stb textedit clamp str cursor stb textedit delete str cursor cursor preferred break ifdef stb textedit textstart case stb textedit textstart endif case stb textedit textstart cursor select start select preferred break ifdef stb textedit textend case stb textedit textend endif case stb textedit textend cursor stb textedit stringlen str select start select preferred break ifdef stb textedit textstart case stb textedit textstart stb textedit shift endif case stb textedit textstart stb textedit shift stb textedit prep selection cursor cursor select preferred break ifdef stb textedit textend case stb textedit textend stb textedit shift endif case stb textedit textend stb textedit shift stb textedit prep selection cursor cursor select stb textedit stringlen str preferred break ifdef stb textedit linestart case stb textedit linestart endif case stb textedit linestart stb textedit clamp str stb textedit single cursor cursor stb textedit getchar str cursor stb textedit newline cursor preferred break ifdef stb textedit lineend case stb textedit lineend endif case stb textedit lineend int stb textedit stringlen str stb textedit clamp str stb textedit single cursor cursor stb textedit getchar str cursor stb textedit newline cursor preferred break ifdef stb textedit linestart case stb textedit linestart stb textedit shift endif case stb textedit linestart stb textedit shift stb textedit clamp str stb textedit prep selection cursor single cursor cursor stb textedit getchar str cursor stb textedit newline cursor select cursor preferred break ifdef stb textedit lineend case stb textedit lineend stb textedit shift endif case stb textedit lineend stb textedit shift int stb textedit stringlen str stb textedit clamp str stb textedit prep selection cursor single cursor cursor stb textedit getchar str cursor stb textedit newline cursor select cursor preferred break undo processing optimize undo redo buffer circular static void stb textedit flush redo stb undo redo point imstb textedit undostatecount redo char point imstb textedit undocharcount discard oldest entry undo list static void stb textedit discard undo stb undo undo point undo characters clean undo rec char storage int undo rec insert length delete characters records undo char point imstb textedit memmove undo char undo char size undo char point sizeof imstb textedit chartype undo point undo rec char storage undo rec char storage optimize rid char storage infer undo point imstb textedit memmove undo rec undo rec size undo point sizeof undo rec discard oldest entry redo list bad undo redo store actual characters cases redo character buffer undo buffer static void stb textedit discard redo stb undo int imstb textedit undostatecount redo point undo characters clean undo rec char storage int undo rec insert length remaining redo character data buffer redo char point imstb textedit memmove undo char redo char point undo char redo char point size imstb textedit undocharcount redo char point sizeof imstb textedit chartype adjust position records account memmove redo point undo rec char storage undo rec char storage redo records buffer redo point dear imgui size size size imstb textedit undostatecount redo point sizeof undo rec const char buf char undo rec void buf const char buf char undo rec sizeof undo rec void buf assert char undo rec redo point buf assert char undo rec redo point size buf imstb textedit memmove undo rec redo point undo rec redo point size redo point point redo point static stb undo record stb text create undo record stb undo int numchars time create undo record discard redo stb textedit flush redo free records room sliding existing records undo point imstb textedit undostatecount stb textedit discard undo characters store fit buffer undo numchars imstb textedit undocharcount undo point undo char point return null free characters buffer room undo char point numchars imstb textedit undocharcount stb textedit discard undo return undo rec undo point static imstb textedit chartype stb text createundo stb undo int pos int insert len int delete len stb undo record stb text create undo record insert len null return null pos insert length imstb textedit positiontype insert len delete length imstb textedit positiontype delete len insert len char storage return null char storage undo char point undo char point insert len return undo char char storage static void stb text undo imstb textedit string str stb textedit stb undo undostate stb undo record undo point return apply undo record create redo record undo rec undo point undo rec redo point char storage insert length delete length delete length insert length delete length undo record delete characters redo record insert characters deleted store cases room store characters characters stored redoing leave room redo characters stored leave room redo true bail undo char point delete length imstb textedit undocharcount undo records character space space store redo characters insert length int room store characters eventually undo char point delete length redo char point happen redo point imstb textedit undostatecount return room discard redo record stb textedit discard redo undo rec redo point char storage redo char point delete length redo char point redo char point delete length save characters delete length undo char char storage stb textedit getchar str carry deletion stb textedit deletechars str delete length check type recorded action insert length easy case deletion insert characters stb textedit insertchars str undo char char storage insert length undo char point insert length cursor insert length undo point redo point static void stb text redo imstb textedit string str stb textedit stb undo undostate stb undo record redo point imstb textedit undostatecount return apply redo record create undo record undo rec undo point undo rec redo point room undo record redo record derived undo record delete length insert length insert length delete length char storage delete length redo record requires delete characters undo record store characters undo char point insert length redo char point insert length delete length int char storage undo char point undo char point undo char point insert length save characters insert length undo char char storage stb textedit getchar str stb textedit deletechars str delete length insert length easy case insert characters stb textedit insertchars str undo char char storage insert length redo char point insert length cursor insert length undo point redo point static void stb text makeundo insert stb textedit int int length stb text createundo undostate length static void stb text makeundo delete imstb textedit string str stb textedit int int length int imstb textedit chartype stb text createundo undostate length length stb textedit getchar str static void stb text makeundo replace imstb textedit string str stb textedit int int length int length int imstb textedit chartype stb text createundo undostate length length length stb textedit getchar str reset default static void stb textedit clear stb textedit int single undostate undo point undostate undo char point undostate redo point imstb textedit undostatecount undostate redo char point imstb textedit undocharcount select select start cursor preferred preferred cursor initialized single unsigned char single insert mode row count api initialize static void stb textedit initialize stb textedit int single stb textedit clear single defined gnuc defined clang pragma gcc diagnostic push pragma gcc diagnostic wcast qual endif static int stb textedit paste imstb textedit string str stb textedit imstb textedit chartype const ctext int len return stb textedit paste internal str imstb textedit chartype ctext len defined gnuc defined clang pragma gcc diagnostic pop endif endif imstb textedit implementation software licenses choose prefer alternative mit license copyright sean barrett permission granted free charge person obtaining copy software documentation files software deal software restriction including limitation rights copy modify merge publish distribute sublicense sell copies software permit persons software furnished subject conditions copyright notice permission notice included copies substantial portions software software warranty kind express implied including limited warranties merchantability fitness purpose noninfringement event authors copyright holders liable claim damages liability action contract tort arising connection software dealings software alternative public domain free unencumbered software released public domain free copy modify publish compile sell distribute software source code form compiled binary purpose commercial commercial jurisdictions recognize copyright laws author authors software dedicate copyright software public domain dedication benefit public large detriment heirs successors intend dedication overt relinquishment perpetuity future rights software copyright law software warranty kind express implied including limited warranties merchantability fitness purpose noninfringement event authors liable claim damages liability action contract tort arising connection software dealings software