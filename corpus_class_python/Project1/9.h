dear imgui modified version stb rect pack grep dear imgui stb rect pack public domain rectangle packing sean barrett packing rectangular textures atlas rotation including define stb rect pack implementation file implementation awesomest packing method totally naive stb truetype meant replace tests issues docs memory allocations qsort assert stdlib override defining stbrp sort stbrp assert library skyline left algorithm note rectangle packers implement api init function credits library sean barrett minor features martins mozeiko github intellectual kitty bugfixes warning fixes jeremy jaussaud fabian giesen version history large rect mode expose stbrp maxval public avoid small space waste gracefully fail wide rectangles warning fixes return packing success fail result remove cast const avoid warnings compiler warnings bug rects bug rects stbrp sort replacing qsort stbrp assert replacing assert fixed minor bug stbrp large rects support initial release license file license include ifndef stb include stb rect pack define stb include stb rect pack define stb rect pack version ifdef stbrp static define stbrp def static define stbrp def extern endif ifdef cplusplus extern endif typedef struct stbrp context stbrp context typedef struct stbrp node stbrp node typedef struct stbrp rect stbrp rect typedef int stbrp coord define stbrp maxval fffffff internal maximum supported coordinate stbrp def int stbrp pack rects stbrp context context stbrp rect rects int num rects assign packed locations rectangles rectangles type stbrp rect defined stored array rects num rects rectangles packed packed flag set store minimum location axis left cartesian coordinates left imagine increasing rectangles fit packed flag set access rects array thread function running function temporarily reorders array executes pack rectangle stbrp init target continue packing rectangle function calling multiple times multiple rect arrays produce worse packing calling single time rectangle array option function returns rectangles packed struct stbrp rect reserved int input stbrp coord output stbrp coord int packed valid packing bytes nominally stbrp def void stbrp init target stbrp context context int width int height stbrp node nodes int num nodes initialize rectangle packer pack rectangle width height dimensions temporary storage array nodes num nodes long function time start packing target shutdown function nodes memory stay valid stbrp pack rects calls freed calls finish note guarantee num nodes width stbrp mem defined mem widths quantized multiples small integers guarantee algorithm temporary storage quantized algorithm algorithm temporary storage unable pack rectangles stbrp def void stbrp setup mem stbrp context context int mem optionally function init packing change handling temp memory scenario init reset default false stbrp def void stbrp setup heuristic stbrp context context int heuristic optionally select packing heuristic library heuristics produce worse data sets init reset default enum stbrp heuristic skyline default stbrp heuristic skyline sort height stbrp heuristic skyline default stbrp heuristic skyline sort height details structures matter visible handle memory allocations struct stbrp node stbrp coord stbrp node struct stbrp context int width int height int align int init mode int heuristic int num nodes stbrp node active head stbrp node free head stbrp node extra allocate extra nodes optimal user node count width width ifdef cplusplus endif endif implementation ifdef stb rect pack implementation ifndef stbrp sort include stdlib define stbrp sort qsort endif ifndef stbrp assert include assert define stbrp assert assert endif ifdef msc ver define stbrp notused void define stbrp cdecl cdecl define stbrp notused void sizeof define stbrp cdecl endif enum stbrp init skyline stbrp def void stbrp setup heuristic stbrp context context int heuristic switch context init mode case stbrp init skyline stbrp assert heuristic stbrp heuristic skyline sort height heuristic stbrp heuristic skyline sort height context heuristic heuristic break default stbrp assert stbrp def void stbrp setup mem stbrp context context int mem mem memory bother aligning packing fail oom rectangles easily fit todo smarter approach quantize hit oom rid parameter context align memory quantize widths num nodes nodes num nodes align width align width num nodes align ceil width num nodes context align context width context num nodes context num nodes stbrp def void stbrp init target stbrp context context int width int height stbrp node nodes int num nodes int num nodes nodes nodes nodes null context init mode stbrp init skyline context heuristic stbrp heuristic skyline default context free head nodes context active head context extra context width width context height height context num nodes num nodes stbrp setup mem context node width node sentinel store width explicitly context extra context extra context extra context extra context extra stbrp coord width context extra context extra null minimum position starts static int stbrp skyline min stbrp context stbrp node int int width int pwaste stbrp node node int width int min visited width waste area stbrp notused stbrp assert skip case node node node stbrp assert node ended handling caller efficiency endif stbrp assert node min waste area visited width node node min raise min higher accounted waste min add waste visted waste area visited width node min min node time visited width reduced node visited width node visited width node node add waste area int width node node width visited width width width width visited width waste area width min node visited width width node node pwaste waste area return min typedef struct int stbrp node prev link stbrp findresult static stbrp findresult stbrp skyline pos stbrp context int width int height int waste stbrp findresult stbrp node prev node tail null align multiple align width width align width width align stbrp assert width align fit bail width width height height prev link null return node active head prev active head node width width int waste stbrp skyline min node node width waste heuristic stbrp heuristic skyline sort height test left prev fit height height vertically waste waste waste waste prev prev node node node null fit aligning edge node position fitting aligned reduces waste left chooses left aligned time heuristic stbrp heuristic skyline sort height tail active head node active head prev active head node admissible tail width tail tail tail int xpos tail width int waste stbrp assert xpos left position matches node xpos prev node node node stbrp assert node xpos node xpos stbrp skyline min node xpos width waste height height waste waste waste waste xpos xpos stbrp assert dear imgui waste waste prev tail tail prev link return static stbrp findresult stbrp skyline pack rectangle stbrp context context int width int height position heuristic stbrp findresult res stbrp skyline pos context width height stbrp node node cur bail failed node fit check memory res prev link null res height context height context free head null res prev link null return res success create node node context free head node stbrp coord res node stbrp coord res height context free head node insert node starting point cur point remaining nodes needing stiched cur res prev link cur res preserve existing start testing stbrp node cur cur node cur res prev link node traverse cur free nodes freed cur cur res width stbrp node cur current node free list cur context free head context free head cur cur stitch list node cur cur res width cur stbrp coord res width ifdef debug cur context active head cur context width stbrp assert cur cur cur cur stbrp assert cur null int count cur context active head cur cur cur count cur context free head cur cur cur count stbrp assert count context num nodes endif return res static int stbrp cdecl rect height compare const void const void const stbrp rect const stbrp rect const stbrp rect const stbrp rect return return return static int stbrp cdecl rect original order const void const void const stbrp rect const stbrp rect const stbrp rect const stbrp rect return packed packed packed packed stbrp def int stbrp pack rects stbrp context context stbrp rect rects int num rects int rects packed packed field internally sorting unsorting num rects rects packed sort heuristic stbrp sort rects num rects sizeof rects rect height compare num rects rects rects rects rects rect space stbrp findresult stbrp skyline pack rectangle context rects rects prev link rects stbrp coord rects stbrp coord rects rects stbrp maxval unsort stbrp sort rects num rects sizeof rects rect original order set packed flags rects packed status num rects rects packed rects stbrp maxval rects stbrp maxval rects packed rects packed return rects packed status return rects packed endif software licenses choose prefer alternative mit license copyright sean barrett permission granted free charge person obtaining copy software documentation files software deal software restriction including limitation rights copy modify merge publish distribute sublicense sell copies software permit persons software furnished subject conditions copyright notice permission notice included copies substantial portions software software warranty kind express implied including limited warranties merchantability fitness purpose noninfringement event authors copyright holders liable claim damages liability action contract tort arising connection software dealings software alternative public domain free unencumbered software released public domain free copy modify publish compile sell distribute software source code form compiled binary purpose commercial commercial jurisdictions recognize copyright laws author authors software dedicate copyright software public domain dedication benefit public large detriment heirs successors intend dedication overt relinquishment perpetuity future rights software copyright law software warranty kind express implied including limited warranties merchantability fitness purpose noninfringement event authors liable claim damages liability action contract tort arising connection software dealings software