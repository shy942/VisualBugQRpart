dear imgui modified version stb truetype fixing compiler static analyzer warnings grep dear imgui stb truetype public domain authored sean barrett rad game tools security guarantee untrusted font files library range checking offsets file meaning attacker read arbitrary memory library processes true type files parse files extract glyph metrics extract glyph shapes render glyphs channel bitmaps antialiasing box filter render glyphs channel sdf bitmaps signed distance field function todo cmaps crashproof bad data hinting longer patented cleartype style optimize simple memory allocator intermediates optimize build edge list curves optimize rasterize curves additional contributors mikko mononen compound shape support cmap formats tor andersson kerning subpixel rendering dougall johnson open type type font handling daniel ribeiro maciel basic gpos based kerning misc ryan gordon simon glass github intellectual kitty imanol celaya daniel ribeiro maciel bug warning reports fixes zer mollyrocket fabian ryg giesen github cass everitt martins mozeiko github aloucks stoiko haemimont games cap petschulat github oyvindjam brian hook omar cornut github vassvik walter van niftrik ryan griege david gow peter valle david sergey popov ivan assen ivanov giumo clanjor anthony pesch higor euripedes johan duparc thomas fields hou qiming derek vinyard rob loach cort stratton kenney phillis brian costabile ken voskuil kaesve version history broken rasterizer fixes warning query svg data glyphs query kerning table kern gpos minimize missing glyph duplication kerning gpos kern defined warning pack font range skips missing codepoints scale font metrics gpos kerning stbtt fmod add missing function arguments const doc sdf support arguments const num fonts ttc function support open type fonts apple fonts suppress warnings casting const wcast qual unused variable warning user defined fabs rare memory leak remove duplicate typedef warning avoid crash outofmem allocation userdata properly document stbtt rasterize fixes vertical horizontal edges pack font ranges accept arrays sparse codepoints variant pack font ranges pack render separate phases stbtt font ffset worked input fixed assert bug rasterizer replace assert stbtt assert rasterizer history file license file license usage include file places refer file write define stb truetype implementation include file expands actual implementation file implementation private file generates implementation define stbtt static simple api don ship fine tools quick start stbtt bake font bitmap bake font bitmap texture stbtt baked quad compute quad draw char improved api shippable include stb rect pack optional stbtt pack stbtt pack set oversampling improved quality small fonts stbtt pack font ranges pack renders stbtt pack stbtt packed quad load font file memory buffer buffer loaded stbtt init font stbtt font offset indexing ttc font collections stbtt number fonts number fonts ttc font collections render unicode codepoint bitmap stbtt codepoint bitmap allocates returns bitmap stbtt codepoint bitmap renders bitmap provide stbtt codepoint bitmap box big bitmap character advance positioning stbtt codepoint metrics stbtt font metrics stbtt font metrics stbtt codepoint kern advance starting version rasterizer replaced faster generally precise rasterizer rasterizer accurately measures pixel coverage anti aliasing case multiple shapes overlap case overestimates pixel coverage anti aliasing intersecting shapes wrong turns problem enable rasterizer define stbtt rasterizer version incur speed hit additional documentation block comment series sample programs sample programs header file includes documentation api function concepts understand library codepoint characters defined unicode codepoints uppercase lowercase cedilla hiragana glyph visual character shape codepoint rendered glyph glyph font specific integer representing glyph baseline glyph shapes defined relative baseline uppercase characters characters extend baseline current point draw text screen track current point origin character current point vertical position baseline baked fonts model vertical font metrics vertical qualities font vertically position space characters docs stbtt font metrics font size pixels points preferred interface font sizes stb truetype tall font vertical extent pixels sounds good skip paragraph font points common typographic measurement describing font size defined points inch stb truetype point api compatibility true inch conventions sense displays monitors number pixels inch windows traditionally convention pixels inch making inch measurements inches effectively defining point pixels additionally true type font data explicit scale factor scale font glyphs points author observed scale factor wrong commercial fonts making fonts scaled points true type spec incoherently sized practice detailed usage scale select high font points pixels scale pixel height scale mapping pixels compute scale factor functions baseline select coordinate baseline text font bounding box baseline relative bounding box characters distance pixels worst case character extend baseline edge characters screen set baseline current point set current point character character extend left current point font dependent choose current point leftmost point hope add padding check bounding box left bearing character displayed set current point based displaying character compute bounding box character signed values relative current point baseline returns character displayed rectangle current point baseline current point baseline advancing character glyph metrics compute current point advance advanced usage quality functions subpixel characters subpixel positioning font anti aliased hinted import quality baked fonts kerning supported supporting subpixel rendering kerning worth text polished performance convert unicode codepoints glyph indexes operate glyphs stb truetype forced conversion lot memory allocations modify temp buffer allocate temp buffer freeing performance lot notes raw data ttf file changing building auxiliary data structures bit inefficient endian systems data big endian assuming caching bitmaps glyph shapes big deal appears hard programmatically determine font file general provide api recommend performance measurements bit bit previous release pool allocations inline sort rasterizer sample programs incomplete text api draws quads properly aligned lossless tests truetype demo win complete version define stb truetype implementation force include generate implementation include stb truetype unsigned char ttf buffer unsigned char temp bitmap stbtt bakedchar cdata ascii glyphs luint ftex void stbtt initfont void fread ttf buffer fopen windows fonts times ttf stbtt bake font bitmap ttf buffer temp bitmap cdata guarantee fits free ttf buffer point gen textures ftex bind texture texture ftex tex image texture alpha alpha unsigned byte temp bitmap free temp bitmap point tex parameteri texture texture min filter linear void stbtt print float float char text assume orthographic projection units screen pixels origin left enable blend blend func src alpha src alpha enable texture bind texture texture ftex quads text text text stbtt aligned quad stbtt baked quad cdata text opengl tex coord vertex tex coord vertex tex coord vertex tex coord vertex text endif complete program compiles single bitmap print ascii art include stdio define stb truetype implementation force include generate implementation include stb truetype char ttf buffer int main int argc char argv stbtt fontinfo font unsigned char bitmap int argc atoi argv argc atoi argv fread ttf buffer fopen argc argv windows fonts arialbd ttf stbtt init font font ttf buffer stbtt font offset ttf buffer bitmap stbtt codepoint bitmap font stbtt scale pixel height font putchar bitmap putchar return endif output mio complete program print banner bugs char buffer unsigned char screen int main int arg char argv stbtt fontinfo font int ascent baseline float scale xpos leave padding case character extends left char text heljo intentionally misspelled brokenness fread buffer fopen windows fonts arialbd ttf stbtt init font font buffer scale stbtt scale pixel height font stbtt font metrics font ascent baseline int ascent scale text int advance lsb float shift xpos float floor xpos stbtt codepoint metrics font text advance lsb stbtt codepoint bitmap box subpixel font text scale scale shift stbtt codepoint bitmap subpixel font screen baseline int xpos scale scale shift text note stomps data character boxes overlap wrong api baking character bitmaps textures render sequence characters render bitmap temp buffer alpha blend working buffer xpos advance scale text xpos scale stbtt codepoint kern advance font text text putchar screen putchar return endif integration codebase sections supply alternate definitions library functions stb truetype link runtime library ifdef stb truetype implementation define stbtt int including override ifndef stbtt uint typedef unsigned char stbtt uint typedef signed char stbtt int typedef unsigned short stbtt uint typedef signed short stbtt int typedef unsigned int stbtt uint typedef signed int stbtt int endif typedef char stbtt check size sizeof stbtt int typedef char stbtt check size sizeof stbtt int define stbtt ifloor stbtt iceil avoid math ifndef stbtt ifloor include math define stbtt ifloor int floor define stbtt iceil int ceil endif ifndef stbtt sqrt include math define stbtt sqrt sqrt define stbtt pow pow endif ifndef stbtt fmod include math define stbtt fmod fmod endif ifndef stbtt cos include math define stbtt cos cos define stbtt acos acos endif ifndef stbtt fabs include math define stbtt fabs fabs endif define functions stbtt malloc stbtt free avoid malloc ifndef stbtt malloc include stdlib define stbtt malloc void malloc define stbtt free void free endif ifndef stbtt assert include assert define stbtt assert assert endif ifndef stbtt strlen include string define stbtt strlen strlen endif ifndef stbtt memcpy include string define stbtt memcpy memcpy define stbtt memset memset endif endif interface ifndef stb include stb truetype define stb include stb truetype ifdef stbtt static define stbtt def static define stbtt def extern endif ifdef cplusplus extern endif private structure typedef struct unsigned char data int cursor int size stbtt buf texture baking api api functions typedef struct unsigned short coordinates bbox bitmap float xoff yoff xadvance stbtt bakedchar stbtt def int stbtt bake font bitmap const unsigned char data int offset font location offset plain ttf float pixel height height font pixels unsigned char pixels int int bitmap filled int char int num chars characters bake stbtt bakedchar chardata allocate num chars long return positive unused row bitmap return negative returns negative number characters fit return characters fit rows crappy packing typedef struct float left float stbtt aligned quad stbtt def void stbtt baked quad const stbtt bakedchar chardata int int data int char character display float xpos float ypos pointers current position screen pixel space stbtt aligned quad output quad draw int opengl fillrule true opengl rule false earlier baked quad char character char creates quad draw advances current position coordinate assumes increases characters extend current position discussion baseline inefficient optimize stbtt def void stbtt scaled font metrics const unsigned char fontdata int float size float ascent float descent float gap query font vertical metrics create font texture baking api options packing multiple fonts atlas perfectly typedef struct unsigned short coordinates bbox bitmap float xoff yoff xadvance float xoff yoff stbtt packedchar typedef struct stbtt pack context stbtt pack context typedef struct stbtt fontinfo stbtt fontinfo ifndef stb rect pack version typedef struct stbrp rect stbrp rect endif stbtt def int stbtt pack stbtt pack context spc unsigned char pixels int width int height int stride bytes int padding void alloc context initializes packing context stored passed stbtt pack context future calls context pack characters bitmap passed channel bitmap width height stride bytes distance row packed tightly padding padding leave character bitmaps textures bilinear filtering returns failure success stbtt def void stbtt pack stbtt pack context spc cleans packing context frees memory define stbtt point size stbtt def int stbtt pack font range stbtt pack context spc const unsigned char fontdata int font float font size int unicode char range int num chars range stbtt packedchar chardata range creates character bitmaps font font fontdata font creates num chars range bitmaps characters unicode values starting unicode char range increasing data render stored chardata range pass stbtt packed quad renderable quads font size height character ascender descender computed stbtt scale pixel height point size computed stbtt scale mapping pixels wrap point size stbtt point size pass result font size font max min pixels tall stbtt point size pixels tall typedef struct float font size int unicode codepoint range chars continuous codepoint int array unicode codepoints array unicode codepoints int num chars stbtt packedchar chardata range output unsigned char oversample oversample set internally stbtt pack range stbtt def int stbtt pack font ranges stbtt pack context spc const unsigned char fontdata int font stbtt pack range ranges int num ranges creates character bitmaps multiple ranges characters stored ranges create packed bitmap multiple calls stbtt pack font range note multiple times single pack pack stbtt def void stbtt pack set oversampling stbtt pack context spc unsigned int oversample unsigned int oversample oversampling font increases quality allowing higher quality subpixel positioning valuable smaller text sizes function sets oversampling calls stbtt pack font range stbtt pack font ranges gather rects pack context default oversampling achieved oversample oversample total number pixels required oversample oversample larger default oversampling requires storage render oversampled textures bilinear filtering readme stb tests oversample oversampled fonts pack font ranges gather set calls pack font ranges gather rects stbtt def void stbtt pack set skip missing codepoints stbtt pack context spc int skip skip tells stb truetype skip codepoints glyph skip default codepoints glyph recived font missing character glyph typically box convention stbtt def void stbtt packed quad const stbtt packedchar chardata int int data int char character display float xpos float ypos pointers current position screen pixel space stbtt aligned quad output quad draw int align integer stbtt def int stbtt pack font ranges gather rects stbtt pack context spc const stbtt fontinfo info stbtt pack range ranges int num ranges stbrp rect rects stbtt def void stbtt pack font ranges pack rects stbtt pack context spc stbrp rect rects int num rects stbtt def int stbtt pack font ranges render rects stbtt pack context spc const stbtt fontinfo info stbtt pack range ranges int num ranges stbrp rect rects calling functions sequence roughly equivalent calling stbtt pack font ranges control packing multiple fonts pack custom data font texture source stbtt pack font ranges create custom version functions gather rects multiple times building single array rects pack rects render rects repeatedly result packing calling pack font ranges multiple times opaque structure mess holds context needed pack pack struct stbtt pack context void user allocator context void pack info int width int height int stride bytes int padding int skip missing unsigned int oversample oversample unsigned char pixels void nodes font loading stbtt def int stbtt number fonts const unsigned char data function determine number fonts font file true type collection ttc files multiple fonts true type font ttf files font number fonts indexing previous function total fonts error occurs returned stbtt def int stbtt font offset const unsigned char data int ttf ttc file font font sequential number starting function font offset returns range regular ttf file define font offset return indices structure defined publicly declare stack global treat opaque struct stbtt fontinfo void userdata unsigned char data pointer ttf file int fontstart offset start font int num glyphs number glyphs needed range checking int loca head glyf hhea hmtx kern gpos svg table locations offset start ttf int map cmap mapping chosen character encoding int loc format format needed map glyph glyph stbtt buf cff cff font data stbtt buf charstrings charstring stbtt buf gsubrs global charstring subroutines stbtt buf subrs private charstring subroutines stbtt buf fontdicts array font dicts stbtt buf fdselect map glyph fontdict stbtt def int stbtt init font stbtt fontinfo info const unsigned char data int offset offset file defines font function builds cached info rest allocate stbtt fontinfo stbtt init font special free contents pure data additional data structures returns failure character glyph conversi stbtt def int stbtt glyph const stbtt fontinfo info int unicode codepoint perform multiple operations character speed function character process glyph based functions codepoint based functions returns character codepoint defined font character properties stbtt def float stbtt scale pixel height const stbtt fontinfo info float pixels computes scale factor produce font height pixels tall height measured distance highest ascender lowest descender equivalent calling stbtt font metrics computing scale pixels ascent descent prefer measure height ascent calculation stbtt def float stbtt scale mapping pixels const stbtt fontinfo info float pixels computes scale factor produce font size mapped pixels tall traditional compute positive stbtt def void stbtt font metrics const stbtt fontinfo info int ascent int descent int gap ascent coordinate baseline font extends descent coordinate baseline font extends typically negative gap spacing row descent row ascent advance vertical position ascent descent gap expressed unscaled coordinates multiply scale factor size stbtt def int stbtt font metrics const stbtt fontinfo info int typo ascent int typo descent int typo gap analogous font metrics returns typographic values table specific windows ttf files returns success table failure stbtt def void stbtt font bounding box const stbtt fontinfo info int int int int bounding box characters stbtt def void stbtt codepoint metrics const stbtt fontinfo info int codepoint int advance width int left bearing left bearing offset current horizontal position left edge character advance width offset current horizontal position horizontal position expressed unscaled coordinates stbtt def int stbtt codepoint kern advance const stbtt fontinfo info int int additional add advance stbtt def int stbtt codepoint box const stbtt fontinfo info int codepoint int int int int bounding box visible glyph unscaled coordinates stbtt def void stbtt glyph metrics const stbtt fontinfo info int glyph int advance width int left bearing stbtt def int stbtt glyph kern advance const stbtt fontinfo info int glyph int glyph stbtt def int stbtt glyph box const stbtt fontinfo info int glyph int int int int takes glyph indices greater efficiency typedef struct stbtt kerningentry int glyph stbtt glyph int glyph int advance stbtt kerningentry stbtt def int stbtt kerning table length const stbtt fontinfo info stbtt def int stbtt kerning table const stbtt fontinfo info stbtt kerningentry table int table length retrieves complete list kerning pairs font stbtt kerning table writes table length entries returns entries write table sorted glyph glyph glyph glyph glyph glyph glyph shapes bitmaps declaration order reasons ifndef stbtt vmove predefine values enum stbtt vmove stbtt vline stbtt vcurve stbtt vcubic endif ifndef stbtt vertex predefine values share code rad define stbtt vertex type short stbtt int visible header file typedef struct stbtt vertex type unsigned char type padding stbtt vertex endif stbtt def int stbtt glyph const stbtt fontinfo info int glyph returns drawn glyph stbtt def int stbtt codepoint shape const stbtt fontinfo info int unicode codepoint stbtt vertex vertices stbtt def int stbtt glyph shape const stbtt fontinfo info int glyph stbtt vertex vertices returns vertices fills vertices pointer expressed unscaled coordinates shape series contours starts stbtt moveto consists series mixed stbtt lineto stbtt curveto segments lineto draws previous endpoint curveto draws quadratic bezier previous endpoint bezier control point stbtt def void stbtt free shape const stbtt fontinfo info stbtt vertex vertices frees data allocated stbtt def unsigned char stbtt svg doc const stbtt fontinfo info int stbtt def int stbtt codepoint svg const stbtt fontinfo info int unicode codepoint const char svg stbtt def int stbtt glyph svg const stbtt fontinfo info int const char svg fills svg character svg data returns data size svg bitmap rendering stbtt def void stbtt free bitmap unsigned char bitmap void userdata frees bitmap allocated stbtt def unsigned char stbtt codepoint bitmap const stbtt fontinfo info float scale float scale int codepoint int width int height int xoff int yoff allocates large single channel bpp bitmap renders character glyph scale antialiasing coverage transparent fully covered opaque width height filled width height bitmap stored left xoff yoff offset pixel space glyph origin left bitmap stbtt def unsigned char stbtt codepoint bitmap subpixel const stbtt fontinfo info float scale float scale float shift float shift int codepoint int width int height int xoff int yoff stbtt codepoitn bitmap subpixel shift character stbtt def void stbtt codepoint bitmap const stbtt fontinfo info unsigned char output int int int stride float scale float scale int codepoint stbtt codepoint bitmap pass storage bitmap form output row spacing stride bytes bitmap clipped bytes stbtt codepoint bitmap box width height positioning info stbtt def void stbtt codepoint bitmap subpixel const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int codepoint stbtt codepoint bitmap subpixel shift character stbtt def void stbtt codepoint bitmap subpixel prefilter const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int oversample int oversample float float int codepoint stbtt codepoint bitmap subpixel prefiltering performed stbtt pack set oversampling stbtt def void stbtt codepoint bitmap box const stbtt fontinfo font int codepoint float scale float scale int int int int bbox bitmap centered glyph origin bitmap width height location place bitmap left left bearing scale note bitmap increases shape increases codepoint bitmap box codepoint box inverted stbtt def void stbtt codepoint bitmap box subpixel const stbtt fontinfo font int codepoint float scale float scale float shift float shift int int int int stbtt codepoint bitmap box subpixel shift character functions equivalent functions operate glyph indices unicode codepoints efficiency stbtt def unsigned char stbtt glyph bitmap const stbtt fontinfo info float scale float scale int glyph int width int height int xoff int yoff stbtt def unsigned char stbtt glyph bitmap subpixel const stbtt fontinfo info float scale float scale float shift float shift int glyph int width int height int xoff int yoff stbtt def void stbtt glyph bitmap const stbtt fontinfo info unsigned char output int int int stride float scale float scale int glyph stbtt def void stbtt glyph bitmap subpixel const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int glyph stbtt def void stbtt glyph bitmap subpixel prefilter const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int oversample int oversample float float int glyph stbtt def void stbtt glyph bitmap box const stbtt fontinfo font int glyph float scale float scale int int int int stbtt def void stbtt glyph bitmap box subpixel const stbtt fontinfo font int glyph float scale float scale float shift float shift int int int int todo expose structure typedef struct int stride unsigned char pixels stbtt bitmap rasterize shape quadratic beziers bitmap stbtt def void stbtt rasterize stbtt bitmap result channel bitmap draw float flatness pixels allowable error curve pixels stbtt vertex vertices array vertices defining shape int num verts number vertices array float scale float scale scale applied input vertices float shift float shift translation applied input vertices int int translation applied input int invert vertically flip shape void userdata context stbtt malloc signed distance function field rendering stbtt def void stbtt free sdf unsigned char bitmap void userdata frees sdf bitmap allocated stbtt def unsigned char stbtt glyph sdf const stbtt fontinfo info float scale int glyph int padding unsigned char onedge float pixel dist scale int width int height int xoff int yoff stbtt def unsigned char stbtt codepoint sdf const stbtt fontinfo info float scale int codepoint int padding unsigned char onedge float pixel dist scale int width int height int xoff int yoff functions compute discretized sdf field single character suitable storing single channel texture sampling bilinear filtering testing larger threshold produce scalable fonts info font scale controls size sdf bitmap creating regular bitmap glyph codepoint character generate sdf padding extra pixels character filled distance character effects bit outlines onedge test sdf reconstruct character isocontour character pixel dist scale sdf increase moving sdf pixel edge scale positive onedge negative onedge width height output height width sdf bitmap including padding xoff yoff output origin character return array bytes width height size pixel dist scale onedge scale bias optimal limited application trading precision special effects sdf values range clamped scale stbtt scale pixel height padding onedge pixel dist scale create sdf bitmap character pixels high bitmap pixels high produce filled shape sample sdf pixel pixel sdf greater equal antialias scope additionally compute offset outlines stroke character border character sdf pixels compare choice variables maps range pixels shape pixels shape intended apply effects interior range needed proper antialiasing font smaller sizes function computes sdf analytically sdf pixel building higher res bitmap approximating theory quality high sdf size representation unclear true practice building higher res bitmap computing drop prevention algorithm optimized expect slow computing lots characters large sizes finding font solve offline tables font ttf file ttf file hard names file encodings languages case insensitive comparison details depend encoding language complex underspecified truetype gigantic functions ways stbtt matching font case sensitive comparisons unicode encoded names font calling stbtt init font stbtt font string strings file comparisons called stbtt init font stbtt def int stbtt matching font const unsigned char fontdata const char int flags returns offset font matches stbtt macstyle dontcare font arial bold flag font arial checks mac style header field fonts set consistently define stbtt macstyle dontcare define stbtt macstyle bold define stbtt macstyle italic define stbtt macstyle underscore define stbtt macstyle check bitfield stbtt def int stbtt compare utf utf bigendian const char int len const char int len returns string interpreted utf identical string interpreted big endian utf strings func stbtt def const char stbtt font string const stbtt fontinfo font int length int platform int encoding int language int returns string big endian double byte unicode puts length bytes length values truetype spec enum platform stbtt platform unicode stbtt platform mac stbtt platform iso stbtt platform microsoft enum encoding stbtt platform unicode stbtt unicode eid unicode stbtt unicode eid unicode stbtt unicode eid iso stbtt unicode eid unicode bmp stbtt unicode eid unicode enum encoding stbtt platform microsoft stbtt eid symbol stbtt eid unicode bmp stbtt eid shiftjis stbtt eid unicode enum encoding stbtt platform mac script manager codes stbtt mac eid roman stbtt mac eid arabic stbtt mac eid japanese stbtt mac eid hebrew stbtt mac eid chinese trad stbtt mac eid greek stbtt mac eid korean stbtt mac eid russian enum language stbtt platform microsoft lcid problematic english lci arabic lci stbtt lang english stbtt lang italian stbtt lang chinese stbtt lang japanese stbtt lang dutch stbtt lang korean stbtt lang french stbtt lang russian stbtt lang german stbtt lang spanish stbtt lang hebrew stbtt lang swedish enum language stbtt platform mac stbtt mac lang english stbtt mac lang japanese stbtt mac lang arabic stbtt mac lang korean stbtt mac lang dutch stbtt mac lang russian stbtt mac lang french stbtt mac lang spanish stbtt mac lang german stbtt mac lang swedish stbtt mac lang hebrew stbtt mac lang chinese simplified stbtt mac lang italian stbtt mac lang chinese trad ifdef cplusplus endif endif stb include stb truetype implementation ifdef stb truetype implementation ifndef stbtt max oversample define stbtt max oversample endif stbtt max oversample error stbtt max oversample endif typedef int stbtt test oversample pow stbtt max oversample stbtt max oversample ifndef stbtt rasterizer version define stbtt rasterizer version endif ifdef msc ver define stbtt notused void define stbtt notused void sizeof endif stbtt buf helpers parse data file static stbtt uint stbtt buf stbtt buf cursor size return return data cursor static stbtt uint stbtt buf peek stbtt buf cursor size return return data cursor static void stbtt buf seek stbtt buf int stbtt assert size cursor size size static void stbtt buf skip stbtt buf int stbtt buf seek cursor static stbtt uint stbtt buf stbtt buf int stbtt uint int stbtt assert stbtt buf return static stbtt buf stbtt buf const void size size stbtt buf stbtt assert size data stbtt uint size int size cursor return define stbtt buf stbtt buf define stbtt buf stbtt buf static stbtt buf stbtt buf range const stbtt buf int int stbtt buf stbtt buf null size size return data data size return static stbtt buf stbtt cff stbtt buf int count start offsize start cursor count stbtt buf count offsize stbtt buf stbtt assert offsize offsize stbtt buf skip offsize count stbtt buf skip stbtt buf offsize return stbtt buf range start cursor start static stbtt uint stbtt cff int stbtt buf int stbtt buf return return stbtt buf return stbtt buf return stbtt buf return stbtt buf stbtt assert return static void stbtt cff skip operand stbtt buf int stbtt buf peek stbtt assert stbtt buf skip cursor size stbtt buf break stbtt cff int static stbtt buf stbtt dict stbtt buf int key stbtt buf seek cursor size int start cursor stbtt buf peek stbtt cff skip operand cursor stbtt buf stbtt buf key return stbtt buf range start start return stbtt buf range static void stbtt dict ints stbtt buf int key int outcount stbtt uint int stbtt buf operands stbtt dict key outcount operands cursor operands size stbtt cff int operands static int stbtt cff count stbtt buf stbtt buf seek return stbtt buf static stbtt buf stbtt cff stbtt buf int int count offsize start stbtt buf seek count stbtt buf offsize stbtt buf stbtt assert count stbtt assert offsize offsize stbtt buf skip offsize start stbtt buf offsize stbtt buf offsize return stbtt buf range count offsize start start accessors parse data file platforms misaligned reads truetype fonts padded alignment define unaligned truetype define byte stbtt uint define char stbtt int define fixed long static stbtt uint ushort stbtt uint return static stbtt int short stbtt uint return static stbtt uint ulong stbtt uint return static stbtt int long stbtt uint return define stbtt tag define stbtt tag str stbtt tag str str str str static int stbtt isfont stbtt uint font check version number stbtt tag font return true type stbtt tag font typ return true type type font support stbtt tag font otto return open type cff stbtt tag font return open type stbtt tag font true return apple specification true type fonts return optimize binary search static stbtt uint stbtt table stbtt uint data stbtt uint fontstart const char tag stbtt int num tables ushort data fontstart stbtt uint tabledir fontstart stbtt int num tables stbtt uint loc tabledir stbtt tag data loc tag return ulong data loc return static int stbtt font offset internal unsigned char font collection int font valid stbtt isfont font collection return check ttc stbtt tag font collection ttcf version ulong font collection ulong font collection stbtt int long font collection return return ulong font collection return static int stbtt number fonts internal unsigned char font collection font valid font stbtt isfont font collection return check ttc stbtt tag font collection ttcf version ulong font collection ulong font collection return long font collection return static stbtt buf stbtt subrs stbtt buf cff stbtt buf fontdict stbtt uint subrsoff private loc stbtt buf pdict stbtt dict ints fontdict private loc private loc private loc return stbtt buf null pdict stbtt buf range cff private loc private loc stbtt dict ints pdict subrsoff subrsoff return stbtt buf null stbtt buf seek cff private loc subrsoff return stbtt cff cff people table time needed static int stbtt svg stbtt fontinfo info stbtt uint info svg stbtt table info data info fontstart svg stbtt uint offset ulong info data info svg offset info svg return info svg static int stbtt init font internal stbtt fontinfo info unsigned char data int fontstart stbtt uint cmap stbtt int num tables info data data info fontstart fontstart info cff stbtt buf null cmap stbtt table data fontstart cmap required info loca stbtt table data fontstart loca required info head stbtt table data fontstart head required info glyf stbtt table data fontstart glyf required info hhea stbtt table data fontstart hhea required info hmtx stbtt table data fontstart hmtx required info kern stbtt table data fontstart kern required info gpos stbtt table data fontstart gpos required cmap info head info hhea info hmtx return info glyf required truetype info loca return initialization cff type fonts otf stbtt buf topdict topdictidx stbtt uint cstype charstrings fdarrayoff fdselectoff stbtt uint cff cff stbtt table data fontstart cff cff return info fontdicts stbtt buf null info fdselect stbtt buf null todo size table info cff stbtt buf data cff info cff read header stbtt buf skip stbtt buf seek stbtt buf hdrsize todo list multiple fonts stbtt cff topdictidx stbtt cff topdict stbtt cff topdictidx stbtt cff string info gsubrs stbtt cff stbtt dict ints topdict charstrings stbtt dict ints topdict cstype stbtt dict ints topdict fdarrayoff stbtt dict ints topdict fdselectoff info subrs stbtt subrs topdict support type charstrings cstype return charstrings return fdarrayoff cid font fdselectoff return stbtt buf seek fdarrayoff info fontdicts stbtt cff info fdselect stbtt buf range fdselectoff size fdselectoff stbtt buf seek charstrings info charstrings stbtt cff stbtt table data fontstart maxp info num glyphs ushort data info num glyphs xffff info svg cmap encoding table understand avoid searching todo installable glyph num tables ushort data cmap info map num tables stbtt uint encoding record cmap encoding understand switch ushort data encoding record case stbtt platform microsoft switch ushort data encoding record case stbtt eid unicode bmp case stbtt eid unicode unicode info map cmap ulong data encoding record break break case stbtt platform unicode mac encoding unicode bother check info map cmap ulong data encoding record break info map return info loc format ushort data info head return stbtt def int stbtt glyph const stbtt fontinfo info int unicode codepoint stbtt uint data info data stbtt uint map info map stbtt uint format ushort data map format apple byte encoding stbtt int bytes ushort data map unicode codepoint bytes return byte data map unicode codepoint return format stbtt uint ushort data map stbtt uint count ushort data map stbtt uint unicode codepoint stbtt uint unicode codepoint count return ushort data map unicode codepoint return format stbtt assert todo high byte mapping japanese chinese korean return format standard mapping windows fonts binary search collection ranges stbtt uint segcount ushort data map stbtt uint search range ushort data map stbtt uint entry selector ushort data map stbtt uint range shift ushort data map binary search segments stbtt uint count map stbtt uint search count unicode codepoint xffff return lie count count seg count search range nearest power unicode codepoint ushort data search range shift search range shift decrement bias correctly smallest search entry selector stbtt uint search range ushort data search search range unicode codepoint search search range entry selector search stbtt uint offset start stbtt uint item stbtt uint search count start ushort data map segcount item ushort data count item unicode codepoint start unicode codepoint return offset ushort data map segcount item offset return stbtt uint unicode codepoint short data map segcount item return ushort data offset unicode codepoint start map segcount item format format stbtt uint ngroups ulong data map stbtt int high high stbtt int ngroups binary search group high stbtt int mid high rounds mid high stbtt uint start char ulong data map mid stbtt uint char ulong data map mid stbtt uint unicode codepoint start char high mid stbtt uint unicode codepoint char mid stbtt uint start glyph ulong data map mid format return start glyph unicode codepoint start char format return start glyph return todo stbtt assert return stbtt def int stbtt codepoint shape const stbtt fontinfo info int unicode codepoint stbtt vertex vertices return stbtt glyph shape info stbtt glyph info unicode codepoint vertices static void stbtt setvertex stbtt vertex stbtt uint type stbtt int stbtt int stbtt int stbtt int type type stbtt int stbtt int stbtt int stbtt int static int stbtt glyf offset const stbtt fontinfo info int glyph int stbtt assert info cff size glyph info num glyphs return glyph range info loc format return unknown glyph map format info loc format info glyf ushort info data info loca glyph info glyf ushort info data info loca glyph info glyf ulong info data info loca glyph info glyf ulong info data info loca glyph return length return static int stbtt glyph info const stbtt fontinfo info int glyph int int int int stbtt def int stbtt glyph box const stbtt fontinfo info int glyph int int int int info cff size stbtt glyph info info glyph int stbtt glyf offset info glyph return short info data short info data short info data short info data return stbtt def int stbtt codepoint box const stbtt fontinfo info int codepoint int int int int return stbtt glyph box info stbtt glyph info codepoint stbtt def int stbtt glyph const stbtt fontinfo info int glyph stbtt int number contours int info cff size return stbtt glyph info info glyph null null null null stbtt glyf offset info glyph return number contours short info data return number contours static int stbtt close shape stbtt vertex vertices int num vertices int int start stbtt int stbtt int stbtt int scx stbtt int scy stbtt int stbtt int start stbtt setvertex vertices num vertices stbtt vcurve scx scy stbtt setvertex vertices num vertices stbtt vcurve scx scy stbtt setvertex vertices num vertices stbtt vcurve stbtt setvertex vertices num vertices stbtt vline return num vertices static int stbtt glyph shape const stbtt fontinfo info int glyph stbtt vertex pvertices stbtt int number contours stbtt uint pts contours stbtt uint data info data stbtt vertex vertices int num vertices int stbtt glyf offset info glyph pvertices null return number contours short data number contours stbtt uint flags flagcount stbtt int ins start stbtt int scx scy stbtt uint points pts contours data ins ushort data number contours points data number contours ins ushort pts contours number contours number contours loose bound vertices vertices stbtt vertex stbtt malloc sizeof vertices info userdata vertices return flagcount pass load uninterpreted data allocated array shifted array overwrite create final data starting starting offset uninterpreted data ends calculated load flags flagcount flags points flags flagcount points flagcount vertices type flags load coordinates flags vertices type flags stbtt int points flags flags stbtt int points points points vertices stbtt int load coordinates flags vertices type flags stbtt int points flags flags stbtt int points points points vertices stbtt int convert format num vertices scx scy flags vertices type stbtt int vertices stbtt int vertices num vertices stbtt close shape vertices num vertices start scx scy start start flags start start curve point point curve start save wraparound scx scy vertices type point curve point interpolate point curve stbtt int vertices stbtt int vertices point start point stbtt int vertices stbtt int vertices point starting point skip stbtt setvertex vertices num vertices stbtt vmove ushort pts contours flags curve curve control points row interpolate curve midpoint stbtt setvertex vertices num vertices stbtt vcurve stbtt setvertex vertices num vertices stbtt vcurve stbtt setvertex vertices num vertices stbtt vline num vertices stbtt close shape vertices num vertices start scx scy number contours compound shapes int stbtt uint comp data num vertices vertices stbtt uint flags gidx int comp num verts stbtt vertex comp verts tmp float mtx flags short comp comp gidx short comp comp flags values flags shorts mtx short comp comp mtx short comp comp mtx char comp comp mtx char comp comp todo handle matching point stbtt assert flags scale mtx mtx short comp comp mtx mtx flags yscale mtx short comp comp mtx mtx mtx short comp comp flags mtx short comp comp mtx short comp comp mtx short comp comp mtx short comp comp transformation scales float stbtt sqrt mtx mtx mtx mtx float stbtt sqrt mtx mtx mtx mtx indexed glyph comp num verts stbtt glyph shape info gidx comp verts comp num verts transform vertices comp num verts stbtt vertex comp verts stbtt vertex type stbtt vertex type mtx mtx mtx stbtt vertex type mtx mtx mtx stbtt vertex type mtx mtx mtx stbtt vertex type mtx mtx mtx append vertices tmp stbtt vertex stbtt malloc num vertices comp num verts sizeof stbtt vertex info userdata tmp vertices stbtt free vertices info userdata comp verts stbtt free comp verts info userdata return num vertices vertices stbtt memcpy tmp vertices num vertices sizeof stbtt vertex stbtt memcpy tmp num vertices comp verts comp num verts sizeof stbtt vertex vertices stbtt free vertices info userdata vertices tmp stbtt free comp verts info userdata num vertices comp num verts components flags number counters pvertices vertices return num vertices typedef struct int bounds int started float float stbtt int min max min max stbtt vertex pvertices int num vertices stbtt csctx define stbtt csctx init bounds bounds null static void stbtt track vertex stbtt csctx stbtt int stbtt int max started max max started max min started min min started min started static void stbtt csctx stbtt csctx stbtt uint type stbtt int stbtt int stbtt int stbtt int stbtt int stbtt int bounds stbtt track vertex type stbtt vcubic stbtt track vertex stbtt track vertex stbtt setvertex pvertices num vertices type pvertices num vertices stbtt int pvertices num vertices stbtt int num vertices static void stbtt csctx close shape stbtt csctx ctx ctx ctx ctx ctx stbtt csctx ctx stbtt vline int ctx int ctx static void stbtt csctx rmove stbtt csctx ctx float float stbtt csctx close shape ctx ctx ctx ctx ctx ctx ctx stbtt csctx ctx stbtt vmove int ctx int ctx static void stbtt csctx rline stbtt csctx ctx float float ctx ctx stbtt csctx ctx stbtt vline int ctx int ctx static void stbtt csctx rccurve stbtt csctx ctx float float float float float float float ctx float ctx float float ctx ctx stbtt csctx ctx stbtt vcubic int ctx int ctx int int int int static stbtt buf stbtt subr stbtt buf idx int int count stbtt cff count idx int bias count bias count bias bias count return stbtt buf null return stbtt cff idx static stbtt buf stbtt cid glyph subrs const stbtt fontinfo info int glyph stbtt buf fdselect info fdselect int nranges start fmt fdselector stbtt buf seek fdselect fmt stbtt buf fdselect fmt untested stbtt buf skip fdselect glyph fdselector stbtt buf fdselect fmt nranges stbtt buf fdselect start stbtt buf fdselect nranges stbtt buf fdselect stbtt buf fdselect glyph start glyph fdselector break start fdselector return stbtt buf null dear imgui fixed nothings stb return stbtt subrs info cff stbtt cff info fontdicts fdselector static int stbtt charstring const stbtt fontinfo info int glyph stbtt csctx int header maskbits subr stack height int subrs clear stack float stbtt buf subr stack subrs info subrs float define stbtt cserr ignores initial width needed hmtx stbtt cff info charstrings glyph cursor size clear stack stbtt buf switch todo implement hinting case hintmask case cntrmask header maskbits implicit vstem header stbtt buf skip maskbits break case hstem case vstem case hstemhm case vstemhm maskbits break case rmoveto header return stbtt cserr rmoveto stack stbtt csctx rmove break case vmoveto header return stbtt cserr vmoveto stack stbtt csctx rmove break case hmoveto header return stbtt cserr hmoveto stack stbtt csctx rmove break case rlineto return stbtt cserr rlineto stack stbtt csctx rline break hlineto vlineto vhcurveto hvcurveto alternate horizontal vertical starting place case vlineto return stbtt cserr vlineto stack goto vlineto case hlineto return stbtt cserr hlineto stack break stbtt csctx rline vlineto break stbtt csctx rline break case hvcurveto return stbtt cserr hvcurveto stack goto hvcurveto case vhcurveto return stbtt cserr vhcurveto stack break stbtt csctx rccurve hvcurveto break stbtt csctx rccurve break case rrcurveto return stbtt cserr rcurveline stack stbtt csctx rccurve break case rcurveline return stbtt cserr rcurveline stack stbtt csctx rccurve return stbtt cserr rcurveline stack stbtt csctx rline break case rlinecurve return stbtt cserr rlinecurve stack stbtt csctx rline return stbtt cserr rlinecurve stack stbtt csctx rccurve break case vvcurveto case hhcurveto return stbtt cserr curveto stack stbtt csctx rccurve stbtt csctx rccurve break case callsubr subrs info fdselect size subrs stbtt cid glyph subrs info glyph subrs fallthrough case callgsubr return stbtt cserr subr stack int subr stack height return stbtt cserr recursion limit subr stack subr stack height stbtt subr subrs info gsubrs size return stbtt cserr subr cursor clear stack break case return subr stack height return stbtt cserr return subr subr stack subr stack height clear stack break case endchar stbtt csctx close shape return case byte escape float float int stbtt buf switch todo flex implementations ignore flex depth resolution draw beziers case hflex return stbtt cserr hflex stack stbtt csctx rccurve stbtt csctx rccurve break case flex return stbtt cserr flex stack stbtt csctx rccurve stbtt csctx rccurve break case hflex return stbtt cserr hflex stack stbtt csctx rccurve stbtt csctx rccurve break case flex return stbtt cserr flex stack stbtt fabs stbtt fabs stbtt csctx rccurve stbtt csctx rccurve break default return stbtt cserr unimplemented break default return stbtt cserr reserved operator push float stbtt int stbtt buf stbtt buf skip float stbtt int stbtt cff int return stbtt cserr push stack overflow clear stack break clear stack return stbtt cserr endchar undef stbtt cserr static int stbtt glyph shape const stbtt fontinfo info int glyph stbtt vertex pvertices runs charstring count output avoid realloc stbtt csctx count ctx stbtt csctx init stbtt csctx output ctx stbtt csctx init stbtt charstring info glyph count ctx pvertices stbtt vertex stbtt malloc count ctx num vertices sizeof stbtt vertex info userdata output ctx pvertices pvertices stbtt charstring info glyph output ctx stbtt assert output ctx num vertices count ctx num vertices return output ctx num vertices pvertices null return static int stbtt glyph info const stbtt fontinfo info int glyph int int int int stbtt csctx stbtt csctx init int stbtt charstring info glyph min min max max return num vertices stbtt def int stbtt glyph shape const stbtt fontinfo info int glyph stbtt vertex pvertices info cff size return stbtt glyph shape info glyph pvertices return stbtt glyph shape info glyph pvertices stbtt def void stbtt glyph metrics const stbtt fontinfo info int glyph int advance width int left bearing stbtt uint num long hor metrics ushort info data info hhea glyph num long hor metrics advance width advance width short info data info hmtx glyph left bearing left bearing short info data info hmtx glyph advance width advance width short info data info hmtx num long hor metrics left bearing left bearing short info data info hmtx num long hor metrics glyph num long hor metrics stbtt def int stbtt kerning table length const stbtt fontinfo info stbtt uint data info data info kern table horizontal format info kern return ushort data number tables return ushort data horizontal flag set format return return ushort data stbtt def int stbtt kerning table const stbtt fontinfo info stbtt kerningentry table int table length stbtt uint data info data info kern int length table horizontal format info kern return ushort data number tables return ushort data horizontal flag set format return length ushort data table length length length table length length table glyph ushort data table glyph ushort data table advance short data return length static int stbtt glyph kern info advance const stbtt fontinfo info int glyph int glyph stbtt uint data info data info kern stbtt uint needle straw int table horizontal format info kern return ushort data number tables return ushort data horizontal flag set format return ushort data needle glyph glyph straw ulong data note unaligned read needle straw needle straw return short data return static stbtt int stbtt coverage stbtt uint coverage table int glyph stbtt uint coverage format ushort coverage table switch coverage format case stbtt uint glyph count ushort coverage table binary search stbtt int glyph count int straw needle glyph stbtt uint glyph array coverage table stbtt uint glyph glyph ushort glyph array straw glyph needle straw needle straw return break case stbtt uint range count ushort coverage table stbtt uint range array coverage table binary search stbtt int range count int straw start straw needle glyph stbtt uint range record range record range array straw start ushort range record straw ushort range record needle straw start needle straw stbtt uint start coverage ushort range record return start coverage glyph straw start break default return unsupported return static stbtt int stbtt glyph class stbtt uint class def table int glyph stbtt uint class def format ushort class def table switch class def format case stbtt uint start glyph ushort class def table stbtt uint glyph count ushort class def table stbtt uint class def array class def table glyph start glyph glyph start glyph glyph count return stbtt int ushort class def array glyph start glyph break case stbtt uint class range count ushort class def table stbtt uint class range records class def table binary search stbtt int class range count int straw start straw needle glyph stbtt uint class range record class range record class range records straw start ushort class range record straw ushort class range record needle straw start needle straw return stbtt int ushort class range record break default return unsupported definition type return error glyphs assigned class fall class open type spec return define stbtt assert break unimplemented formats define stbtt gpos todo assert static stbtt int stbtt glyph gpos info advance const stbtt fontinfo info int glyph int glyph stbtt uint lookup list offset stbtt uint lookup list stbtt uint lookup count stbtt uint data stbtt int sti info gpos return data info data info gpos ushort data return major version ushort data return minor version lookup list offset ushort data lookup list data lookup list offset lookup count ushort lookup list lookup count stbtt uint lookup offset ushort lookup list stbtt uint lookup table lookup list lookup offset stbtt uint lookup type ushort lookup table stbtt uint table count ushort lookup table stbtt uint table offsets lookup table lookup type pair adjustment positioning subtable continue sti sti table count sti stbtt uint subtable offset ushort table offsets sti stbtt uint table lookup table subtable offset stbtt uint pos format ushort table stbtt uint coverage offset ushort table stbtt int coverage stbtt coverage table coverage offset glyph coverage continue switch pos format case stbtt int int straw needle stbtt uint format ushort table stbtt uint format ushort table format format support formats stbtt int record pair size bytes stbtt uint pair set count ushort table stbtt uint pair pos offset ushort table coverage stbtt uint pair table table pair pos offset stbtt uint pair count ushort pair table stbtt uint pair array pair table coverage pair set count return needle glyph pair count binary search stbtt uint glyph stbtt uint pair pair pair array record pair size bytes glyph ushort pair straw glyph needle straw needle straw stbtt int advance short pair return advance return break case stbtt uint format ushort table stbtt uint format ushort table format format support formats stbtt uint class def offset ushort table stbtt uint class def offset ushort table int glyph class stbtt glyph class table class def offset glyph int glyph class stbtt glyph class table class def offset glyph stbtt uint class count ushort table stbtt uint class count ushort table stbtt uint class records class records stbtt int advance glyph class glyph class class count return malformed glyph class glyph class class count return malformed class records table class records class records glyph class class count advance short class records glyph class return advance return break default return unsupported position format return stbtt def int stbtt glyph kern advance const stbtt fontinfo info int int int advance info gpos advance stbtt glyph gpos info advance info info kern advance stbtt glyph kern info advance info return advance stbtt def int stbtt codepoint kern advance const stbtt fontinfo info int int info kern info gpos kerning table waste time codepoint glyphs return return stbtt glyph kern advance info stbtt glyph info stbtt glyph info stbtt def void stbtt codepoint metrics const stbtt fontinfo info int codepoint int advance width int left bearing stbtt glyph metrics info stbtt glyph info codepoint advance width left bearing stbtt def void stbtt font metrics const stbtt fontinfo info int ascent int descent int gap ascent ascent short info data info hhea descent descent short info data info hhea gap gap short info data info hhea stbtt def int stbtt font metrics const stbtt fontinfo info int typo ascent int typo descent int typo gap int tab stbtt table info data info fontstart tab return typo ascent typo ascent short info data tab typo descent typo descent short info data tab typo gap typo gap short info data tab return stbtt def void stbtt font bounding box const stbtt fontinfo info int int int int short info data info head short info data info head short info data info head short info data info head stbtt def float stbtt scale pixel height const stbtt fontinfo info float height int fheight short info data info hhea short info data info hhea return float height fheight stbtt def float stbtt scale mapping pixels const stbtt fontinfo info float pixels int units ushort info data info head return pixels units stbtt def void stbtt free shape const stbtt fontinfo info stbtt vertex stbtt free info userdata stbtt def stbtt uint stbtt svg doc const stbtt fontinfo info int int stbtt uint data info data stbtt uint svg doc list data stbtt svg stbtt fontinfo info int num entries ushort svg doc list stbtt uint svg docs svg doc list num entries stbtt uint svg doc svg docs ushort svg doc ushort svg doc return svg doc return stbtt def int stbtt glyph svg const stbtt fontinfo info int const char svg stbtt uint data info data stbtt uint svg doc info svg return svg doc stbtt svg doc info svg doc null svg char data info svg ulong svg doc return ulong svg doc return stbtt def int stbtt codepoint svg const stbtt fontinfo info int unicode codepoint const char svg return stbtt glyph svg info stbtt glyph info unicode codepoint svg antialiasing software rasterizer stbtt def void stbtt glyph bitmap box subpixel const stbtt fontinfo font int glyph float scale float scale float shift float shift int int int int int suppresses compiler warning stbtt glyph box font glyph space character integral bboxes treating pixels squares pixels touched stbtt ifloor scale shift stbtt ifloor scale shift stbtt iceil scale shift stbtt iceil scale shift stbtt def void stbtt glyph bitmap box const stbtt fontinfo font int glyph float scale float scale int int int int stbtt glyph bitmap box subpixel font glyph scale scale stbtt def void stbtt codepoint bitmap box subpixel const stbtt fontinfo font int codepoint float scale float scale float shift float shift int int int int stbtt glyph bitmap box subpixel font stbtt glyph font codepoint scale scale shift shift stbtt def void stbtt codepoint bitmap box const stbtt fontinfo font int codepoint float scale float scale int int int int stbtt codepoint bitmap box subpixel font codepoint scale scale rasterizer typedef struct stbtt hheap chunk struct stbtt hheap chunk stbtt hheap chunk typedef struct stbtt hheap struct stbtt hheap chunk head void free int num remaining head chunk stbtt hheap static void stbtt hheap alloc stbtt hheap size size void userdata free void free free void return num remaining head chunk int count size size stbtt hheap chunk stbtt hheap chunk stbtt malloc sizeof stbtt hheap chunk size count userdata null return null head head num remaining head chunk count num remaining head chunk return char head sizeof stbtt hheap chunk size num remaining head chunk static void stbtt hheap free stbtt hheap void void free free static void stbtt hheap cleanup stbtt hheap void userdata stbtt hheap chunk head stbtt hheap chunk stbtt free userdata typedef struct stbtt edge float int invert stbtt edge typedef struct stbtt active edge struct stbtt active edge stbtt rasterizer version int float int direction elif stbtt rasterizer version float fdx fdy float direction float float error unrecognized stbtt rasterizer version endif stbtt active edge stbtt rasterizer version define stbtt fixshift define stbtt stbtt fixshift define stbtt fixmask stbtt static stbtt active edge stbtt active stbtt hheap stbtt edge int float start point void userdata stbtt active edge stbtt active edge stbtt hheap alloc sizeof userdata float dxdy stbtt assert null return avoid overshooting dxdy stbtt ifloor stbtt dxdy stbtt ifloor stbtt dxdy stbtt ifloor stbtt start point offset stbtt direction invert return elif stbtt rasterizer version static stbtt active edge stbtt active stbtt hheap stbtt edge int float start point void userdata stbtt active edge stbtt active edge stbtt hheap alloc sizeof userdata float dxdy stbtt assert null stbtt assert start point return fdx dxdy fdy dxdy dxdy dxdy start point direction invert return error unrecognized stbtt rasterizer version endif stbtt rasterizer version note routine clips fills extend edges ideally happen happen truetype glyph bounding boxes wrong user supplies small bitmap static void stbtt active edges unsigned char scanline int len stbtt active edge int max weight winding int record edge start point direction int direction draw int stbtt fixshift int stbtt fixshift len pixel compute combined coverage scanline scanline stbtt uint max weight stbtt fixshift add antialiasing scanline scanline stbtt uint stbtt stbtt fixmask max weight stbtt fixshift clip len add antialiasing scanline scanline stbtt uint stbtt fixmask max weight stbtt fixshift len clip pixels scanline scanline stbtt uint max weight static void stbtt rasterize sorted edges stbtt bitmap result stbtt edge int int vsubsample int int void userdata stbtt hheap stbtt active edge active null int int max weight vsubsample weight vertical scanline int vertical subsample unsigned char scanline data scanline result scanline unsigned char stbtt malloc result userdata scanline scanline data vsubsample result float vsubsample result stbtt memset scanline result vsubsample center pixel scanline float scan stbtt active edge step active update active edges remove active edges terminate center scanline step stbtt active edge step scan step delete list stbtt assert direction direction stbtt hheap free advance position current scanline step step advance list resort list needed int changed step active step step step step stbtt active edge step stbtt active edge step changed step step changed break insert edges start center scanline omit scanline scan scan stbtt active edge stbtt active scan userdata null insertion point active null active active insert active active insert stbtt active edge active point process active edges xor fashion active stbtt active edges scanline result active max weight stbtt memcpy result pixels result stride scanline result stbtt hheap cleanup userdata scanline scanline data stbtt free scanline userdata elif stbtt rasterizer version edge passed cross vertical vertical clipped static void stbtt handle clipped edge float scanline int stbtt active edge float float float float return stbtt assert stbtt assert return return stbtt assert stbtt assert stbtt assert stbtt assert stbtt assert scanline direction stbtt assert scanline direction coverage average position static float stbtt sized trapezoid area float height float width float width stbtt assert width stbtt assert width return width width height static float stbtt position trapezoid area float height float float float float return stbtt sized trapezoid area height static float stbtt sized triangle area float height float width return height width static void stbtt active edges float scanline float scanline int len stbtt active edge float float brute force pixel compute intersection points stbtt assert fdx float len stbtt handle clipped edge scanline int stbtt handle clipped edge scanline int stbtt handle clipped edge scanline float float fdx float float float float fdy stbtt assert compute endpoints segment clipped scanline segment starts scanline intersection segment len len range check values int int float height simple case spans pixel int int height direction stbtt assert len scanline stbtt position trapezoid area height scanline height pixel filled int float crossing final step sign area covers pixels flip scanline vertically signed area float stbtt assert stbtt assert int int compute intersection axis crossing compute intersection axis final txxxxx crossing xxxxx xxxxx xxxx xxxxxx final xxx xxxxx goal measure area covered pixel edge crossing blow github todo test crossing crossing sign direction area rectangle covered crossing area sign crossing area triangle crossing scanline stbtt sized triangle area area check final crossing blown test case final int denom final denom dear imgui avoid div final crossing denom denom final crossing final pixel area covered segment pixel rectangle wide height segment variable area stores contribution segment pixel pixel rectangle contribution pixel rectangle contribution contribution contribution pixel leftmost rightmost trapezoid slides pixel pixel contribution pixel rectangle wide times height change pixel step sign change change multiplied pixel width pixel area step area advances step time scanline area step area trapezoid step area step stbtt assert stbtt fabs area accumulated error area step step stbtt assert final area covered pixel rectangle pixels left trapezoid filled segment pixel edge scanline area sign stbtt position trapezoid area final float rest filled based total height segment pixel scanline sign edge box drawing require clipping logic match intended library slow brute force implementation note happen time extrapolated shape lie bounding box int len cases intersections pixel intersection left edges handled splitting regions intersections necessitate case wise logic intersections left edges simple logic produce segments sorted order problem edge epsilon border position distinct segment segment avoid explicitly produce segments based positions rename variables defined pairs float float float float float float float float float segments descending stbtt handle clipped edge scanline stbtt handle clipped edge scanline stbtt handle clipped edge scanline segments descending left stbtt handle clipped edge scanline stbtt handle clipped edge scanline stbtt handle clipped edge scanline segments stbtt handle clipped edge scanline stbtt handle clipped edge scanline segments left stbtt handle clipped edge scanline stbtt handle clipped edge scanline segments stbtt handle clipped edge scanline stbtt handle clipped edge scanline segments left stbtt handle clipped edge scanline stbtt handle clipped edge scanline segment stbtt handle clipped edge scanline rasterize edges supersampling static void stbtt rasterize sorted edges stbtt bitmap result stbtt edge int int vsubsample int int void userdata stbtt hheap stbtt active edge active null int float scanline data scanline scanline stbtt notused vsubsample result scanline float stbtt malloc result sizeof float userdata scanline scanline data scanline scanline result float result result center pixel scanline float scan float scan stbtt active edge step active stbtt memset scanline result sizeof scanline stbtt memset scanline result sizeof scanline update active edges remove active edges terminate scanline step stbtt active edge step scan step delete list stbtt assert direction direction stbtt hheap free step step advance list insert edges start scanline scan stbtt active edge stbtt active scan userdata null scan happen subpixel positioning kind rounding error scan stbtt assert scan unlucky tiny bit edge bounds insert active active process active edges active stbtt active edges scanline scanline result active scan float sum result float int sum scanline scanline sum float stbtt fabs int result pixels result stride unsigned char advance edges step active step stbtt active edge step fdx advance position current scanline step step advance list stbtt hheap cleanup userdata scanline scanline data stbtt free scanline userdata error unrecognized stbtt rasterizer version endif define stbtt compare static void stbtt sort edges ins sort stbtt edge int int stbtt edge stbtt edge int stbtt compare break static void stbtt sort edges quicksort stbtt edge int threshold transitioning insertion sort stbtt edge int compute median stbtt compare stbtt compare mid mid mid swap middle int stbtt compare mid mid mid mid median swap partition loop handling equality crucial sentinels efficiency duplicates stbtt compare break stbtt compare break crossed break recurse smaller iterate larger stbtt sort edges quicksort stbtt sort edges quicksort static void stbtt sort edges stbtt edge int stbtt sort edges quicksort stbtt sort edges ins sort typedef struct float stbtt point static void stbtt rasterize stbtt bitmap result stbtt point pts int wcount int windings float scale float scale float shift float shift int int int invert void userdata float scale inv invert scale scale stbtt edge int stbtt rasterizer version int vsubsample result elif stbtt rasterizer version int vsubsample error unrecognized stbtt rasterizer version endif vsubsample divide evenly reach opacity blow windings explicit edge lists windings wcount stbtt edge stbtt malloc sizeof userdata add extra sentinel return windings stbtt point pts wcount wcount wcount int skip edge horizontal continue add edge list invert invert invert scale shift scale inv shift vsubsample scale shift scale inv shift vsubsample sort edges highest point snap integer stbtt sort sizeof stbtt edge compare stbtt sort edges traverse scanlines intersections scanline xor winding rule stbtt rasterize sorted edges result vsubsample userdata stbtt free userdata static void stbtt add point stbtt point points int float float points return pass unallocated points points tessellate threshold happy todo warped compensate linear stretching static int stbtt tesselate curve stbtt point points int num points float float float float float float float objspace flatness squared int midpoint float float drawn float float segments curve return objspace flatness squared pixel error allowed smaller stbtt tesselate curve points num points objspace flatness squared stbtt tesselate curve points num points objspace flatness squared stbtt add point points num points num points num points return static void stbtt tesselate cubic stbtt point points int num points float float float float float float float float float objspace flatness squared int todo flatness calculation nonsense work float float float float float float float float float longlen float stbtt sqrt stbtt sqrt stbtt sqrt float shortlen float stbtt sqrt float flatness squared longlen longlen shortlen shortlen segments curve return flatness squared objspace flatness squared float float float float float float float float float float float float stbtt tesselate cubic points num points objspace flatness squared stbtt tesselate cubic points num points objspace flatness squared stbtt add point points num points num points num points returns number contours static stbtt point stbtt flatten curves stbtt vertex vertices int num verts float objspace flatness int contour lengths int num contours void userdata stbtt point points int num points float objspace flatness squared objspace flatness objspace flatness int start pass count moves contour count num verts vertices type stbtt vmove num contours return contour lengths int stbtt malloc sizeof contour lengths userdata contour lengths num contours return passes points realloc pass pass pass float pass points stbtt point stbtt malloc num points sizeof points userdata points null goto error num points num verts switch vertices type case stbtt vmove start contour contour lengths num points start start num points vertices vertices stbtt add point points num points break case stbtt vline vertices vertices stbtt add point points num points break case stbtt vcurve stbtt tesselate curve points num points vertices vertices vertices vertices objspace flatness squared vertices vertices break case stbtt vcubic stbtt tesselate cubic points num points vertices vertices vertices vertices vertices vertices objspace flatness squared vertices vertices break contour lengths num points start return points error stbtt free points userdata stbtt free contour lengths userdata contour lengths num contours return null stbtt def void stbtt rasterize stbtt bitmap result float flatness pixels stbtt vertex vertices int num verts float scale float scale float shift float shift int int int invert void userdata float scale scale scale scale scale int winding count int winding lengths null stbtt point windings stbtt flatten curves vertices num verts flatness pixels scale winding lengths winding count userdata windings stbtt rasterize result windings winding lengths winding count scale scale shift shift invert userdata stbtt free winding lengths userdata stbtt free windings userdata stbtt def void stbtt free bitmap unsigned char bitmap void userdata stbtt free bitmap userdata stbtt def unsigned char stbtt glyph bitmap subpixel const stbtt fontinfo info float scale float scale float shift float shift int glyph int width int height int xoff int yoff int stbtt bitmap gbm stbtt vertex vertices int num verts stbtt glyph shape info glyph vertices scale scale scale scale scale stbtt free vertices info userdata return null scale scale stbtt glyph bitmap box subpixel info glyph scale scale shift shift size gbm gbm gbm pixels null case error width width gbm height height gbm xoff xoff yoff yoff gbm gbm gbm pixels unsigned char stbtt malloc gbm gbm info userdata gbm pixels gbm stride gbm stbtt rasterize gbm vertices num verts scale scale shift shift info userdata stbtt free vertices info userdata return gbm pixels stbtt def unsigned char stbtt glyph bitmap const stbtt fontinfo info float scale float scale int glyph int width int height int xoff int yoff return stbtt glyph bitmap subpixel info scale scale glyph width height xoff yoff stbtt def void stbtt glyph bitmap subpixel const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int glyph int stbtt vertex vertices int num verts stbtt glyph shape info glyph vertices stbtt bitmap gbm stbtt glyph bitmap box subpixel info glyph scale scale shift shift gbm pixels output gbm gbm gbm stride stride gbm gbm stbtt rasterize gbm vertices num verts scale scale shift shift info userdata stbtt free vertices info userdata stbtt def void stbtt glyph bitmap const stbtt fontinfo info unsigned char output int int int stride float scale float scale int glyph stbtt glyph bitmap subpixel info output stride scale scale glyph stbtt def unsigned char stbtt codepoint bitmap subpixel const stbtt fontinfo info float scale float scale float shift float shift int codepoint int width int height int xoff int yoff return stbtt glyph bitmap subpixel info scale scale shift shift stbtt glyph info codepoint width height xoff yoff stbtt def void stbtt codepoint bitmap subpixel prefilter const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int oversample int oversample float float int codepoint stbtt glyph bitmap subpixel prefilter info output stride scale scale shift shift oversample oversample stbtt glyph info codepoint stbtt def void stbtt codepoint bitmap subpixel const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int codepoint stbtt glyph bitmap subpixel info output stride scale scale shift shift stbtt glyph info codepoint stbtt def unsigned char stbtt codepoint bitmap const stbtt fontinfo info float scale float scale int codepoint int width int height int xoff int yoff return stbtt codepoint bitmap subpixel info scale scale codepoint width height xoff yoff stbtt def void stbtt codepoint bitmap const stbtt fontinfo info unsigned char output int int int stride float scale float scale int codepoint stbtt codepoint bitmap subpixel info output stride scale scale codepoint bitmap baking super crappy packing source code small static int stbtt bake font bitmap internal unsigned char data int offset font location offset plain ttf float pixel height height font pixels unsigned char pixels int int bitmap filled int char int num chars characters bake stbtt bakedchar chardata float scale int stbtt fontinfo userdata null stbtt init font data offset return stbtt memset pixels background pixels scale stbtt scale pixel height pixel height num chars int advance lsb int stbtt glyph char stbtt glyph metrics advance lsb stbtt glyph bitmap box scale scale advance row check fits vertically moving row return stbtt assert stbtt assert stbtt glyph bitmap pixels scale scale chardata stbtt int chardata stbtt int chardata stbtt int chardata stbtt int chardata xadvance scale advance chardata xoff float chardata yoff float return stbtt def void stbtt baked quad const stbtt bakedchar chardata int int int char float xpos float ypos stbtt aligned quad int opengl fillrule float bias opengl fillrule float ipw iph const stbtt bakedchar chardata char int stbtt ifloor xpos xoff int stbtt ifloor ypos yoff bias bias bias bias ipw iph ipw iph xpos xadvance rectangle packing replacement routines stb rect pack ifndef stb rect pack version typedef int stbrp coord compiler warning compile warning symbols defined include stb rect pack include stb truetype typedef struct int width height int stbrp context typedef struct unsigned char stbrp node struct stbrp rect stbrp coord int packed static void stbrp init target stbrp context int int stbrp node nodes int num nodes width height stbtt notused nodes stbtt notused num nodes static void stbrp pack rects stbrp context stbrp rect rects int num rects int num rects rects width rects height break rects rects rects packed rects rects rects num rects rects packed endif bitmap baking super awesome ryan gordon packing stb rect pack stb rect pack bake font bitmap strategy stbtt def int stbtt pack stbtt pack context spc unsigned char pixels int int int stride bytes int padding void alloc context stbrp context context stbrp context stbtt malloc sizeof context alloc context int num nodes padding stbrp node nodes stbrp node stbtt malloc sizeof nodes num nodes alloc context context null nodes null context null stbtt free context alloc context nodes null stbtt free nodes alloc context return spc user allocator context alloc context spc width spc height spc pixels pixels spc pack info context spc nodes nodes spc padding padding spc stride bytes stride bytes stride bytes spc oversample spc oversample spc skip missing stbrp init target context padding padding nodes num nodes pixels stbtt memset pixels background pixels return stbtt def void stbtt pack stbtt pack context spc stbtt free spc nodes spc user allocator context stbtt free spc pack info spc user allocator context stbtt def void stbtt pack set oversampling stbtt pack context spc unsigned int oversample unsigned int oversample stbtt assert oversample stbtt max oversample stbtt assert oversample stbtt max oversample oversample stbtt max oversample spc oversample oversample oversample stbtt max oversample spc oversample oversample stbtt def void stbtt pack set skip missing codepoints stbtt pack context spc int skip spc skip missing skip define stbtt mask stbtt max oversample static void stbtt prefilter unsigned char pixels int int int stride bytes unsigned int kernel width unsigned char buffer stbtt max oversample int safe kernel width int stbtt memset buffer stbtt max oversample suppress bogus warning analyze int unsigned int total stbtt memset buffer kernel width total kernel width constant common cases compiler optimize divide switch kernel width case safe total pixels buffer stbtt mask buffer kernel width stbtt mask pixels pixels unsigned char total break case safe total pixels buffer stbtt mask buffer kernel width stbtt mask pixels pixels unsigned char total break case safe total pixels buffer stbtt mask buffer kernel width stbtt mask pixels pixels unsigned char total break case safe total pixels buffer stbtt mask buffer kernel width stbtt mask pixels pixels unsigned char total break default safe total pixels buffer stbtt mask buffer kernel width stbtt mask pixels pixels unsigned char total kernel width break stbtt assert pixels total buffer stbtt mask pixels unsigned char total kernel width pixels stride bytes static void stbtt prefilter unsigned char pixels int int int stride bytes unsigned int kernel width unsigned char buffer stbtt max oversample int safe kernel width int stbtt memset buffer stbtt max oversample suppress bogus warning analyze int unsigned int total stbtt memset buffer kernel width total kernel width constant common cases compiler optimize divide switch kernel width case safe total pixels stride bytes buffer stbtt mask buffer kernel width stbtt mask pixels stride bytes pixels stride bytes unsigned char total break case safe total pixels stride bytes buffer stbtt mask buffer kernel width stbtt mask pixels stride bytes pixels stride bytes unsigned char total break case safe total pixels stride bytes buffer stbtt mask buffer kernel width stbtt mask pixels stride bytes pixels stride bytes unsigned char total break case safe total pixels stride bytes buffer stbtt mask buffer kernel width stbtt mask pixels stride bytes pixels stride bytes unsigned char total break default safe total pixels stride bytes buffer stbtt mask buffer kernel width stbtt mask pixels stride bytes pixels stride bytes unsigned char total kernel width break stbtt assert pixels stride bytes total buffer stbtt mask pixels stride bytes unsigned char total kernel width pixels static float stbtt oversample shift int oversample oversample return prefilter box filter width oversample shifts phase oversample pixels oversampled space shift direction counter return float oversample float oversample rects array big accommodate characters ranges stbtt def int stbtt pack font ranges gather rects stbtt pack context spc const stbtt fontinfo info stbtt pack range ranges int num ranges stbrp rect rects int int missing glyph num ranges float ranges font size float scale stbtt scale pixel height info stbtt scale mapping pixels info ranges oversample unsigned char spc oversample ranges oversample unsigned char spc oversample ranges num chars int int codepoint ranges array unicode codepoints null ranges unicode codepoint range ranges array unicode codepoints int glyph stbtt glyph info codepoint glyph spc skip missing missing glyph rects rects stbtt glyph bitmap box subpixel info glyph scale spc oversample scale spc oversample rects stbrp coord spc padding spc oversample rects stbrp coord spc padding spc oversample glyph missing glyph return stbtt def void stbtt glyph bitmap subpixel prefilter const stbtt fontinfo info unsigned char output int int int stride float scale float scale float shift float shift int prefilter int prefilter float float int glyph stbtt glyph bitmap subpixel info output prefilter prefilter stride scale scale shift shift glyph prefilter stbtt prefilter output stride prefilter prefilter stbtt prefilter output stride prefilter stbtt oversample shift prefilter stbtt oversample shift prefilter rects array big accommodate characters ranges stbtt def int stbtt pack font ranges render rects stbtt pack context spc const stbtt fontinfo info stbtt pack range ranges int num ranges stbrp rect rects int missing glyph return save current values int spc oversample int spc oversample num ranges float ranges font size float scale stbtt scale pixel height info stbtt scale mapping pixels info float recip recip spc oversample ranges oversample spc oversample ranges oversample recip spc oversample recip spc oversample stbtt oversample shift spc oversample stbtt oversample shift spc oversample ranges num chars stbrp rect rects packed stbtt packedchar ranges chardata range int advance lsb int codepoint ranges array unicode codepoints null ranges unicode codepoint range ranges array unicode codepoints int glyph stbtt glyph info codepoint stbrp coord pad stbrp coord spc padding pad left pad pad pad pad stbtt glyph metrics info glyph advance lsb stbtt glyph bitmap box info glyph scale spc oversample scale spc oversample stbtt glyph bitmap subpixel info spc pixels spc stride bytes spc oversample spc oversample spc stride bytes scale spc oversample scale spc oversample glyph spc oversample stbtt prefilter spc pixels spc stride bytes spc stride bytes spc oversample spc oversample stbtt prefilter spc pixels spc stride bytes spc stride bytes spc oversample stbtt int stbtt int stbtt int stbtt int xadvance scale advance xoff float recip yoff float recip xoff recip yoff recip glyph missing glyph spc skip missing return packed missing glyph ranges chardata range ranges chardata range missing glyph return fail report failure restore original values spc oversample spc oversample return return stbtt def void stbtt pack font ranges pack rects stbtt pack context spc stbrp rect rects int num rects stbrp pack rects stbrp context spc pack info rects num rects stbtt def int stbtt pack font ranges stbtt pack context spc const unsigned char fontdata int font stbtt pack range ranges int num ranges stbtt fontinfo info int return dear imgui removed stbrp context context stbrp context spc pack info stbrp rect rects flag characters packed num ranges ranges num chars ranges chardata range ranges chardata range ranges chardata range ranges chardata range num ranges ranges num chars rects stbrp rect stbtt malloc sizeof rects spc user allocator context rects null return info userdata spc user allocator context stbtt init font info fontdata stbtt font offset fontdata font stbtt pack font ranges gather rects spc info ranges num ranges rects stbtt pack font ranges pack rects spc rects return stbtt pack font ranges render rects spc info ranges num ranges rects stbtt free rects spc user allocator context return return stbtt def int stbtt pack font range stbtt pack context spc const unsigned char fontdata int font float font size int unicode codepoint range int num chars range stbtt packedchar chardata range stbtt pack range range range unicode codepoint range unicode codepoint range range array unicode codepoints null range num chars num chars range range chardata range chardata range range font size font size return stbtt pack font ranges spc fontdata font range stbtt def void stbtt scaled font metrics const unsigned char fontdata int float size float ascent float descent float gap int ascent descent gap float scale stbtt fontinfo info stbtt init font info fontdata stbtt font offset fontdata scale size stbtt scale pixel height info size stbtt scale mapping pixels info size stbtt font metrics info ascent descent gap ascent float ascent scale descent float descent scale gap float gap scale stbtt def void stbtt packed quad const stbtt packedchar chardata int int int char float xpos float ypos stbtt aligned quad int align integer float ipw iph const stbtt packedchar chardata char align integer float float stbtt ifloor xpos xoff float float stbtt ifloor ypos yoff xoff xoff yoff yoff xpos xoff ypos yoff xpos xoff ypos yoff ipw iph ipw iph xpos xadvance sdf computation define stbtt min define stbtt max static int stbtt ray intersect bezier float orig float ray float float float float hits float perp ray ray float perp ray ray float perp ray ray float roperp orig ray orig ray float perp perp perp float perp perp float perp roperp float int num float discr discr float rcpna float float stbtt sqrt discr rcpna rcpna num num num num num return float rcp len ray ray ray ray float rayn ray rcp len rayn ray rcp len float rayn rayn float rayn rayn float rayn rayn float rod orig rayn orig rayn float float float rod hits hits num hits hits return return static int equal float float return static int stbtt compute crossings float float int nverts stbtt vertex verts int float orig ray float frac int winding passes vertex shape frac float stbtt fmod frac frac orig orig test ray infinity nverts verts type stbtt vline int int verts int verts int int verts int verts stbtt min stbtt max stbtt min float inter inter winding verts type stbtt vcurve int int verts int verts int int verts int verts int int verts int verts int stbtt min stbtt min stbtt min stbtt min int stbtt max stbtt max float float hits float float float float float float equal equal int verts int verts int verts int verts stbtt min stbtt max stbtt min float inter inter winding int num hits stbtt ray intersect bezier orig ray hits num hits hits winding hits num hits hits winding hits return winding static float stbtt cuberoot float return float stbtt pow return float stbtt pow static int stbtt solve cubic float float float float float float float float float float float stbtt sqrt float float stbtt cuberoot stbtt cuberoot return float float stbtt sqrt float float stbtt acos stbtt sqrt negative negative float float stbtt cos float float stbtt cos stbtt assert stbtt fabs asserts safe scales bezier parameter units stbtt assert stbtt fabs stbtt assert stbtt fabs return stbtt def unsigned char stbtt glyph sdf const stbtt fontinfo info float scale int glyph int padding unsigned char onedge float pixel dist scale int width int height int xoff int yoff float scale scale scale scale int int unsigned char data scale return null stbtt glyph bitmap box subpixel info glyph scale scale return null return null padding padding padding padding width width height height xoff xoff yoff yoff invert bitmaps scale scale int float precompute stbtt vertex verts int num verts stbtt glyph shape info glyph verts data unsigned char stbtt malloc info userdata precompute float stbtt malloc num verts sizeof float info userdata num verts num verts verts type stbtt vline float verts scale verts scale float verts scale verts scale float dist float stbtt sqrt precompute dist dist verts type stbtt vcurve float verts scale verts scale float verts scale verts scale float verts scale verts scale float float len len precompute precompute precompute float val float min dist float float float float float gspace scale float gspace scale int winding stbtt compute crossings gspace gspace num verts verts optimize rasterization tesselated curves path num verts float verts scale verts scale verts type stbtt vline precompute float verts scale verts scale float dist dist dist min dist min dist min dist float stbtt sqrt dist coarse culling bbox stbtt min min dist stbtt max min dist stbtt min min dist stbtt max min dist dist float stbtt fabs precompute stbtt assert dist min dist check position minimize float float minimize derivative set solve float min dist dist verts type stbtt vcurve float verts scale verts scale float verts scale verts scale float box stbtt min stbtt min float box stbtt min stbtt min float box stbtt max stbtt max float box stbtt max stbtt max coarse culling bbox avoid computing cubic unnecessarily box min dist box min dist box min dist box min dist int num float float float float res float dist float inv precompute inv inv degree quadratic formula float float float linear res num float discriminant discriminant num float root float stbtt sqrt discriminant res root res root num bother distinguishing solution case code work float inv precompute depend sample point float inv float inv num stbtt solve cubic res dist dist min dist min dist min dist float stbtt sqrt dist num res res res dist dist min dist min dist min dist float stbtt sqrt dist num res res res dist dist min dist min dist min dist float stbtt sqrt dist num res res res dist dist min dist min dist min dist float stbtt sqrt dist winding min dist min dist shape negative val onedge pixel dist scale min dist val val val val data unsigned char val stbtt free precompute info userdata stbtt free verts info userdata return data stbtt def unsigned char stbtt codepoint sdf const stbtt fontinfo info float scale int codepoint int padding unsigned char onedge float pixel dist scale int width int height int xoff int yoff return stbtt glyph sdf info scale stbtt glyph info codepoint padding onedge pixel dist scale width height xoff yoff stbtt def void stbtt free sdf unsigned char bitmap void userdata stbtt free bitmap userdata font matching recommended check utf string prefix utf string return length matching utf string static stbtt int stbtt compare utf utf bigendian prefix stbtt uint stbtt int len stbtt uint stbtt int len stbtt int convert utf utf compare converting len stbtt uint len return return len return return return xdc stbtt uint stbtt uint len return xdc return return return return len xdc return len return return return return len return static int stbtt compare utf utf bigendian internal char int len char int len return len stbtt compare utf utf bigendian prefix stbtt uint len stbtt uint len returns encoding request note byte encodings big endian stbtt compare utf utf bigendian compare stbtt def const char stbtt font string const stbtt fontinfo font int length int platform int encoding int language int stbtt int count string offset stbtt uint font data stbtt uint offset font fontstart stbtt uint stbtt table offset return null count ushort string offset ushort count stbtt uint loc platform ushort loc encoding ushort loc language ushort loc ushort loc length ushort loc return const char string offset ushort loc return null static int stbtt matchpair stbtt uint stbtt uint stbtt uint stbtt int nlen stbtt int target stbtt int stbtt int stbtt int count ushort stbtt int string offset ushort count stbtt uint loc stbtt int ushort loc target encoding stbtt int platform ushort loc encoding ushort loc language ushort loc unicode encoding platform platform encoding platform encoding stbtt int slen ushort loc stbtt int ushort loc check prefix match stbtt int matchlen stbtt compare utf utf bigendian prefix nlen string offset slen matchlen check target encoding language count ushort loc ushort loc platform ushort loc encoding ushort loc language slen ushort loc ushort loc slen matchlen nlen return matchlen nlen matchlen matchlen stbtt compare utf utf bigendian internal char matchlen nlen matchlen char string offset slen return matchlen nlen return todo handle encodings return static int stbtt matches stbtt uint stbtt uint offset stbtt uint stbtt int flags stbtt int nlen stbtt int stbtt strlen char stbtt uint stbtt isfont offset return check italics bold underline flags mac style flags stbtt table offset head ushort flags return stbtt table offset return flags checked mac style flags check family ignore subfamily stbtt matchpair nlen return stbtt matchpair nlen return stbtt matchpair nlen return stbtt matchpair nlen return stbtt matchpair nlen return stbtt matchpair nlen return return static int stbtt matching font internal unsigned char font collection char utf stbtt int flags stbtt int stbtt int stbtt font offset font collection return stbtt matches stbtt uint font collection stbtt uint utf flags return defined gnuc defined clang pragma gcc diagnostic push pragma gcc diagnostic wcast qual endif stbtt def int stbtt bake font bitmap const unsigned char data int offset float pixel height unsigned char pixels int int int char int num chars stbtt bakedchar chardata return stbtt bake font bitmap internal unsigned char data offset pixel height pixels char num chars chardata stbtt def int stbtt font offset const unsigned char data int return stbtt font offset internal unsigned char data stbtt def int stbtt number fonts const unsigned char data return stbtt number fonts internal unsigned char data stbtt def int stbtt init font stbtt fontinfo info const unsigned char data int offset return stbtt init font internal info unsigned char data offset stbtt def int stbtt matching font const unsigned char fontdata const char int flags return stbtt matching font internal unsigned char fontdata char flags stbtt def int stbtt compare utf utf bigendian const char int len const char int len return stbtt compare utf utf bigendian internal char len char len defined gnuc defined clang pragma gcc diagnostic pop endif endif stb truetype implementation version history fixes warning query svg data glyphs query kerning table kern gpos minimize missing glyph duplication kerning gpos kern defined warning pack font range skips missing codepoints scale font metrics open type gpos kerning horizontal stbtt fmod add missing function arguments const doc sdf support arguments const num fonts ttc function support open type fonts apple fonts suppress warnings casting const wcast qual unused variable warning user defined fabs replacement memory leak fontsize warning duplicate typedef warning avoid crash outofmem alloc userdata pack font ranges document stbtt rasterize fixes vertical horizontal edges pack font ranges accept arrays sparse codepoints pack font ranges pack render separate phases stbtt font ffset worked input fixed assert bug rasterizer replace assert stbtt assert rasterizer performance improvements faster test machine precise rasterizer shapes overlap remove stbtt sort misplaced definitions stbtt static typo stbtt static memory leak packing fixes warnings compile issues stb rect pack subpixel position oversampling match oversampled stbtt point size packed case add pack api support oversampling multiple bugs subpixel rendering ryg support mac fonts platform warning warnings bugfix subpixel glyph bug fixed improve documentation warnings warnings stbtt scale mapping pixels stbtt font bounding box stbtt glyph bugfixes subpixel glyph renderer computed wrong bounding box vertex shape curve free sans fixed error font baking kerning subpixel rendering tor bugfixes codepoint glyph conversion table fmt codepoint glyph conversion table fmt stbtt baked quad square texture zer updated sample kerning subpixel fixed warnings cmap fmt compound shapes userdata malloc userdata stb unsigned signed char warnings public release software licenses choose prefer alternative mit license copyright sean barrett permission granted free charge person obtaining copy software documentation files software deal software restriction including limitation rights copy modify merge publish distribute sublicense sell copies software permit persons software furnished subject conditions copyright notice permission notice included copies substantial portions software software warranty kind express implied including limited warranties merchantability fitness purpose noninfringement event authors copyright holders liable claim damages liability action contract tort arising connection software dealings software alternative public domain free unencumbered software released public domain free copy modify publish compile sell distribute software source code form compiled binary purpose commercial commercial jurisdictions recognize copyright laws author authors software dedicate copyright software public domain dedication benefit public large detriment heirs successors intend dedication overt relinquishment perpetuity future rights software copyright law software warranty kind express implied including limited warranties merchantability fitness purpose noninfringement event authors liable claim damages liability action contract tort arising connection software dealings software